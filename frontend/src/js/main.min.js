(() => {
    angular.module('mainApp', [
        'app.core',
        'app.layout',
        'app.components',
        'app.widgets'
    ]);

    angular.module('app.core', [
        'ui.router',
        'ui.bootstrap',
        'ui.layout',
        'ngResource',
        'ngCookies',
        'ngAnimate'
    ]);

    angular.module('app.widgets', [
        'app.core'
    ]);

    angular.module('app.components', [
        'app.core',
        'app.widgets'
    ]);

    angular.module('app.layout', [
        'app.core'
    ]);


})();


// Sample: {addr.location:a,addr.number:b} ==> addr%5Blocation%5D=a&addr%5Bnumber%5D=b
const serializeData = (obj, prefix) => {
    const str = [];
    for (let p in obj) {
        if (obj.constructor === Array) {
            console.log(obj);
            var k = prefix ? `${prefix}[${p}]` : p,
                v = obj[p];
            str.push(typeof v == "object" ?
                serializeData(v, k) :
                `${encodeURIComponent(k)}=${encodeURIComponent(v)}`);
        } else if (obj.hasOwnProperty(p)) {
            //   var k = prefix ? prefix + "[" + p + "]" : p, v = obj[p];
            var k = prefix ? `${prefix}.${p}` : p,
                v = obj[p];
            str.push(typeof v == "object" ?
                serializeData(v, k) :
                `${encodeURIComponent(k)}=${encodeURIComponent(v)}`);
        }
    }
    return str.join("&");
};

// Sample: 35% ==> 0.35
const percentToNum = param => {
    param = param.toString().replace('%', '');
    if (param != undefined && isNaN(param) == false) {
        return param * 1000 / 100000;
    } else {
        return '';
    }
};

/**
*  Secure Hash Algorithm (SHA256)
*  http://www.webtoolkit.info/
*  Original code by Angel Marin, Paul Johnston.
**/
const SHA256 = s => {const chrsz = 8;const hexcase = 0;function safe_add(x, y) {const lsw = (x & 0xFFFF) + (y & 0xFFFF);const msw = (x >> 16) + (y >> 16) + (lsw >> 16);return (msw << 16) | (lsw & 0xFFFF);}function S(X, n) {return (X >>> n) | (X << (32 - n));}function R(X, n) {return (X >>> n);}function Ch(x, y, z) {return ((x & y) ^ ((~x) & z));}function Maj(x, y, z) {return ((x & y) ^ (x & z) ^ (y & z));}function Sigma0256(x) {return (S(x, 2) ^ S(x, 13) ^ S(x, 22));}function Sigma1256(x) {return (S(x, 6) ^ S(x, 11) ^ S(x, 25));}function Gamma0256(x) {return (S(x, 7) ^ S(x, 18) ^ R(x, 3));}function Gamma1256(x) {return (S(x, 17) ^ S(x, 19) ^ R(x, 10));}function core_sha256(m, l) {
    const K = new Array(0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5, 0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5, 0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3, 0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174, 0xE49B69C1, 0xEFBE4786, 0xFC19DC6, 0x240CA1CC, 0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA, 0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7, 0xC6E00BF3, 0xD5A79147, 0x6CA6351, 0x14292967, 0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13, 0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85, 0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3, 0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070, 0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5, 0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3, 0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208, 0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2);const HASH = new Array(0x6A09E667, 0xBB67AE85, 0x3C6EF372, 0xA54FF53A, 0x510E527F, 0x9B05688C, 0x1F83D9AB, 0x5BE0CD19);const W = new Array(64);
    let a;
    let b;
    let c;
    let d;
    let e;
    let f;
    let g;
    let h;
    var i;
    var j;
    let T1, T2;m[l >> 5] |= 0x80 << (24 - l % 32);m[((l + 64 >> 9) << 4) + 15] = l;for (var i = 0; i < m.length; i += 16) {a = HASH[0];b = HASH[1];c = HASH[2];d = HASH[3];e = HASH[4];f = HASH[5];g = HASH[6];h = HASH[7];for (var j = 0; j < 64; j++) {if (j < 16) W[j] = m[j + i];else W[j] = safe_add(safe_add(safe_add(Gamma1256(W[j - 2]), W[j - 7]), Gamma0256(W[j - 15])), W[j - 16]);T1 = safe_add(safe_add(safe_add(safe_add(h, Sigma1256(e)), Ch(e, f, g)), K[j]), W[j]);T2 = safe_add(Sigma0256(a), Maj(a, b, c));h = g;g = f;f = e;e = safe_add(d, T1);d = c;c = b;b = a;a = safe_add(T1, T2);}HASH[0] = safe_add(a, HASH[0]);HASH[1] = safe_add(b, HASH[1]);HASH[2] = safe_add(c, HASH[2]);HASH[3] = safe_add(d, HASH[3]);HASH[4] = safe_add(e, HASH[4]);HASH[5] = safe_add(f, HASH[5]);HASH[6] = safe_add(g, HASH[6]);HASH[7] = safe_add(h, HASH[7]);}return HASH;
}function str2binb(str) {const bin = Array();const mask = (1 << chrsz) - 1;for (let i = 0; i < str.length * chrsz; i += chrsz) {bin[i >> 5] |= (str.charCodeAt(i / chrsz) & mask) << (24 - i % 32);}return bin;}function Utf8Encode(string) {string = string.replace(/rn/g, "n");let utftext = "";for (let n = 0; n < string.length; n++) {const c = string.charCodeAt(n);if (c < 128) {utftext += String.fromCharCode(c);} else if ((c > 127) && (c < 2048)) {utftext += String.fromCharCode((c >> 6) | 192);utftext += String.fromCharCode((c & 63) | 128);} else {utftext += String.fromCharCode((c >> 12) | 224);utftext += String.fromCharCode(((c >> 6) & 63) | 128);utftext += String.fromCharCode((c & 63) | 128);}}return utftext;}function binb2hex(binarray) {const hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";let str = "";for (let i = 0; i < binarray.length * 4; i++) {str += hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) + hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8)) & 0xF);}return str;}s = Utf8Encode(s);return binb2hex(core_sha256(str2binb(s), s.length * chrsz));};

/**
*  Secure Hash Algorithm (SHA1)
*  http://www.webtoolkit.info/
**/
const SHA1 = msg => {function rotate_left(n, s) {const t4 = ( n<<s ) | (n>>>(32-s));return t4;};function lsb_hex(val) {let str="";let i;let vh;let vl;for( i=0; i<=6; i+=2 ) {vh = (val>>>(i*4+4))&0x0f;vl = (val>>>(i*4))&0x0f;str += vh.toString(16) + vl.toString(16);}return str;};function cvt_hex(val) {let str="";let i;let v;for( i=7; i>=0; i-- ) {v = (val>>>(i*4))&0x0f;str += v.toString(16);}return str;};function Utf8Encode(string) {string = string.replace(/rn/g,"n");let utftext = "";for (let n = 0; n < string.length; n++) {const c = string.charCodeAt(n);if (c < 128) {utftext += String.fromCharCode(c);}else if((c > 127) && (c < 2048)) {utftext += String.fromCharCode((c >> 6) | 192);utftext += String.fromCharCode((c & 63) | 128);}else {utftext += String.fromCharCode((c >> 12) | 224);utftext += String.fromCharCode(((c >> 6) & 63) | 128);utftext += String.fromCharCode((c & 63) | 128);}}return utftext;};let blockstart;let i, j;const W = new Array(80);let H0 = 0x67452301;let H1 = 0xEFCDAB89;let H2 = 0x98BADCFE;let H3 = 0x10325476;let H4 = 0xC3D2E1F0;let A, B, C, D, E;var temp;msg = Utf8Encode(msg);const msg_len = msg.length;const word_array = new Array();for( i=0; i<msg_len-3; i+=4 ) {j = msg.charCodeAt(i)<<24 | msg.charCodeAt(i+1)<<16 |msg.charCodeAt(i+2)<<8 | msg.charCodeAt(i+3);word_array.push(j);}switch( msg_len % 4 ) {case 0:i = 0x080000000;break;case 1:i = msg.charCodeAt(msg_len-1)<<24 | 0x0800000;break;case 2:i = msg.charCodeAt(msg_len-2)<<24 | msg.charCodeAt(msg_len-1)<<16 | 0x08000;break;case 3:i = msg.charCodeAt(msg_len-3)<<24 | msg.charCodeAt(msg_len-2)<<16 | msg.charCodeAt(msg_len-1)<<8 | 0x80;break;}word_array.push(i);while( (word_array.length % 16) != 14 ) word_array.push(0);word_array.push(msg_len>>>29);word_array.push((msg_len<<3)&0x0ffffffff);for ( blockstart=0; blockstart<word_array.length; blockstart+=16 ) {for( i=0; i<16; i++ ) W[i] = word_array[blockstart+i];for( i=16; i<=79; i++ ) W[i] = rotate_left(W[i-3] ^ W[i-8] ^ W[i-14] ^ W[i-16], 1);A = H0;B = H1;C = H2;D = H3;E = H4;for( i= 0; i<=19; i++ ) {temp = (rotate_left(A,5) + ((B&C) | (~B&D)) + E + W[i] + 0x5A827999) & 0x0ffffffff;E = D;D = C;C = rotate_left(B,30);B = A;A = temp;}for( i=20; i<=39; i++ ) {temp = (rotate_left(A,5) + (B ^ C ^ D) + E + W[i] + 0x6ED9EBA1) & 0x0ffffffff;E = D;D = C;C = rotate_left(B,30);B = A;A = temp;}for( i=40; i<=59; i++ ) {temp = (rotate_left(A,5) + ((B&C) | (B&D) | (C&D)) + E + W[i] + 0x8F1BBCDC) & 0x0ffffffff;E = D;D = C;C = rotate_left(B,30);B = A;A = temp;}for( i=60; i<=79; i++ ) {temp = (rotate_left(A,5) + (B ^ C ^ D) + E + W[i] + 0xCA62C1D6) & 0x0ffffffff;E = D;D = C;C = rotate_left(B,30);B = A;A = temp;}H0 = (H0 + A) & 0x0ffffffff;H1 = (H1 + B) & 0x0ffffffff;H2 = (H2 + C) & 0x0ffffffff;H3 = (H3 + D) & 0x0ffffffff;H4 = (H4 + E) & 0x0ffffffff;}var temp = cvt_hex(H0) + cvt_hex(H1) + cvt_hex(H2) + cvt_hex(H3) + cvt_hex(H4);return temp.toLowerCase();};


// Grab the files and set them to our variable
// ========================================================================================
// <input id="fileupload" type="file" class="" name="files[]" data-url="upload.do" multiple>
function prepareUpload(event) {
    const ele = $(this).siblings('.hidden')[0];
    uploadFiles(event.target.files, ele);

    // ele.value = resFileId;
    //
    // try {
    //     var resFileId = uploadFiles(event.target.files);
    //     var ele = $(this).siblings('.hidden')[0].value;
    //     var array = ele == ""? [] : ele.split(',') ;
    // } catch (e) {
    //     console.log(e);
    // } finally {
    //     console.log(array);
    //     array.push(resFileId);
    //     console.log(array);
    //     ele.value = array.join(',')).trigger('input';
    // }

    // ele.val(ele.val().split(',').push(resId).join(',')).trigger('input');

    // $(this).siblings('.hidden').val(uploadFiles(event.target.files)).trigger('input');
}


/**
 * @param files uploading files
 * @param ele element that need to receive response ID
 * @desc Files upload module for test. When received id, using "trigger('input')" make ng-model know
 */
function uploadFiles(files, ele) {
    // Create a formdata object and add the files
    const data = new FormData();
    $.each(files, (key, value) => {
        data.append("files", value);
    });

    console.log(files)

    $.ajax({
        url: 'upload.do',
        type: 'POST',
        data,
        cache: false,
        dataType: 'json',
        processData: false, // Don't process the files
        contentType: false, // Set content type to false as jQuery will tell the server its a query string request
        success(data, textStatus, jqXHR) {
            if (typeof data.error === 'undefined') {
                // Success so call function to process the form
                fileid = data.content.name;
                ele.value = data.content.name;
                $(ele).trigger('input');
                // submitForm(event, data);
            } else {
                // Handle errors here
                console.log(`ERRORS: ${data.error}`);
            }
        },
        error(jqXHR, textStatus, errorThrown) {
            // Handle errors here
            console.log(`ERRORS: ${textStatus}`);
            // STOP LOADING SPINNER
        }
    });
}

(() => {
    angular
        .module('app.components')
        .factory('clientOrder', clientOrder);

    /* @ngInject */
    clientOrder.$inject = ['$resource'];

    function clientOrder($resource) {
        return $resource('ws/clientorder/list', {}, {
            query: {
                method: 'GET',
                params: {},
                isArray: true
            }
        });
    }
})();

(() => {
    angular
        .module('app.components')
        .factory('marketOrder', marketOrder);

    /* @ngInject */
    marketOrder.$inject = ['$resource'];

    function marketOrder($resource) {
        return $resource('ws/marketorder/list/:coId', { coId: '@coId' });
    }
})();

(() => {
    angular
        .module('app.components')
        .service('fileUpload', fileUpload);

    /* @ngInject */
    fileUpload.$inject = ['$http'];

    function fileUpload($http) {
        this.uploadFileToUrl = function (file, uploadUrl) {
            var fd = new FormData();
            fd.append('file', file);
            $http.post(uploadUrl, fd, {
                transformRequest: angular.identity,
                headers: { 'Content-Type': undefined }
            })
                .success(function () {
                })
                .error(function () {
                });
        }
    }
})();

(() => {
    angular
        .module('app.components')
        .factory('Login', Login);

    /* @ngInject */
    Login.$inject = ['$resource'];

    function Login($resource) {
        return $resource('ws/login', {}, {
            login: {
                method: 'POST',
                params: {},
                isArray: false
            }
        });
    }
})();

(() => {
    angular
        .module('app.components')
        .factory('marketOrder', marketOrder);

    /* @ngInject */
    marketOrder.$inject = ['$resource'];

    function marketOrder($resource) {
        return $resource('ws/marketorder/list/:coId', { coId: '@coId' });
    }
})();

/**
 * @author Shawn
 * @desc mainAPP
 */
(() => {
    angular
        .module('app.core')
        // Global
        .constant('WEB_INFO', {
            title: 'Order Management System'
        })

        .constant('AUTH_EVENTS', {
            loginSuccess: 'auth-login-success',
            loginFailed: 'auth-login-failed',
            logoutSuccess: 'auth-logout-success',
            sessionTimeout: 'auth-session-timeout',
            notAuthenticated: 'auth-not-authenticated',
            pageNotFound: 'page-not-found',
            serverError: 'server-error'
        })

        // Do auth when state/url change
        .run(($rootScope, AUTH_EVENTS, AuthService) => {
            $rootScope.$on('$stateChangeStart', (event, next) => {
                if (!AuthService.isAuthenticated()) {
                    $rootScope.$broadcast(AUTH_EVENTS.notAuthenticated);
                } else {
                    $rootScope.currentUser = AuthService.getUsername();
                }
            });
        })
})();

/**
 * @author Shawn
 * @desc The Root Controller of the mainAPP
 */
(() => {
    angular
        .module('app.core')
        .controller('mainCtrl', mainCtrl);

    mainCtrl.$inject = ['$rootScope', '$scope', '$location', '$state', '$window', 'AuthService', 'AUTH_EVENTS', 'CommonService'];

    function mainCtrl(
        $rootScope,
        $scope,
        $location,
        $state,
        $window,
        AuthService,
        AUTH_EVENTS,
        CommonService) {

        if (!AuthService.isAuthenticated()) {
            $location.path('/login');
            console.log(1);
        }

        $rootScope.setCurrentUser = user => {
            $rootScope.currentUser = user;
        };

        // Log out
        $scope.logout = () => {
            $rootScope.currentUser = null;
            $rootScope.$broadcast(AUTH_EVENTS.logoutSuccess);
            console.log('logout success');
            // AuthService.logout().then(function(res) {
            //     if (CommonService.isReqSuccess(res)) {
            //         $rootScope.$broadcast(AUTH_EVENTS.logoutSuccess);
            //         console.log('Log out success');
            //     } else {
            //         CommonService.handleResErr(res);
            //     }
            // }, function(res) {
            //     CommonService.handleHttpErr(res);
            // });
        }

        // Listening
        $scope.$on(AUTH_EVENTS.loginSuccess, (event, data) => {
            console.log("login success");
            $state.go('dashboard.order');
        });

        $scope.$on(AUTH_EVENTS.loginFailed, (event, data) => {
            AuthService.destory();
            console.log("login failed");
            // $location.path('/');
        });

        $scope.$on(AUTH_EVENTS.logoutSuccess, (event, data) => {
            AuthService.destroy();
            console.log("login failed");
            // $location.path('/');
        });

        $scope.$on('method-not-allow', (event, data) => {
            console.log("method not allow");
            // $location.path('/');
        });

        $scope.$on(AUTH_EVENTS.pageNotFound, (event, data) => {
            console.log('404 error');
        });

        $scope.$on(AUTH_EVENTS.serverError, (event, data) => {
            console.log('500 error');
        });

    }
})();

(() => {})();

/**
 * @author Shawn
 * @desc mainAPP
 */
(() => {
    const PROJECTSTATUS = {
        0: "te",
        1: "2",
        2: "3",
        3: "r",
        4: "r",
        5: "fewf",
        6: "feaw"
    };

    /* filters */
    const filters = angular.module('app.core')

    .filter('switch', () => param => {
        if (param == 1 || param == '1') {
            return 'OPEN';
        } else {
            return 'CLOSED';
        }
    })

    // 78 ===> 0.78
    .filter('percent', () => param => {
        if (param != undefined && isNaN(param) == false) {
            return param * 1000 / 100000;
        } else {
            return '';
        }
    })

    .filter('category', () => {
        const obj = CATEGORY;
        return param => obj[param] != undefined ? obj[param] : ""
    })

    .filter('buildcompany', () => {
        const obj = BUILDCOMPANY;
        return param => obj[param] != undefined ? obj[param] : ""
    })

    .filter('projectstatus', () => {
        const obj = PROJECTSTATUS;
        return param => obj[param] != undefined ? obj[param] : ""
    });
})();
/**
 * @author Shawn
 * @desc router of app.core
 */
(() => {
    angular.module('app.core')

        .config(
        ($stateProvider, $httpProvider, $urlRouterProvider, $locationProvider) => {

            // Interceptor of Requests
            $httpProvider.interceptors.push([
                '$injector',
                $injector => $injector.get('AuthInterceptor')
            ]);

            $locationProvider.html5Mode({
                enabled: false,
                requireBase: false
            });

            // For any unmatched url, redirect to /
            $urlRouterProvider.otherwise('/login');


            // loginregister
            $stateProvider

                // main page
                .state('dashboard', {
                    url: '/',
                    templateUrl: 'html/dashboard.html'
                })

                .state("dashboard.order", {
                    url: "order",
                    templateUrl: "js/components/client-order-list/client-order-list.html"
                }).state("dashboard.addClientOrder", {
                    url: "orderadd",
                    templateUrl: "js/components/client-order-add/client-order-add.html"
                }).state("dashboard.demo", {
                    url: "demo",
                    templateUrl: "html/demo.html"
                })

                .state('login', {
                    url: '/login',
                    templateUrl: 'html/login.html'
                }).state('register', {
                    url: '/register',
                    templateUrl: 'html/register.html'
                })

                // User Account
                .state('account', {
                    url: '/account',
                    templateUrl: 'html/account/account.html'
                }).state('account.me', {
                    url: '/me',
                    templateUrl: 'html/account/account.me.html'
                })

                // for test
                .state('test', {
                    url: '/test',
                    templateUrl: 'html/test-angular-ui-bootstrap.html',
                    controller: 'testCtrl'
                })
        }
        );
})();

/**
 * @author Shawn
 * @desc Services of the mainAPP
 */

// For test
const commonTest = true;

(() => {
    angular
        .module('app.core')
        .factory('AuthInterceptor', AuthInterceptor)
        .factory('CommonService', CommonService)
        .factory('AuthService', AuthService)
        .factory('registerService', registerService)
        .factory('userService', userService);

    AuthInterceptor.$inject = ['$rootScope', '$q', '$window', 'AUTH_EVENTS'];
    AuthService.$inject = ['$http', '$rootScope', 'AUTH_EVENTS', '$window', 'CommonService'];
    CommonService.$inject = ['$http'];
    registerService.$inject = ['$http', '$rootScope', 'CommonService'];
    userService.$inject = ['$http', '$rootScope', 'CommonService'];


    // Interceptor
    function AuthInterceptor($rootScope, $q, $window, AUTH_EVENTS) {
        const service = {
            request: requestHandler,
            response: responseHandler,
            responseError: responseErrorHandler
        };
        return service;

        function requestHandler(config) {
            config.headers = config.headers || {};
            if ($window.localStorage.token) {
                config.headers['X-AuthToken'] = $window.localStorage.token;
            }
            return config;
        }

        function responseHandler(response) {
            // console.log(response)
            if (response.status === 401) {
                // handle the case where the user is not authenticated
            }
            return response || $q.when(response);
        }

        function responseErrorHandler(response) {
            // console.log(response);
            $rootScope.$broadcast({
                401: AUTH_EVENTS.notAuthenticated,
                403: AUTH_EVENTS.notAuthorized,
                405: 'method-not-allow',
                419: AUTH_EVENTS.sessionTimeout,
                440: AUTH_EVENTS.sessionTimeout,
                404: AUTH_EVENTS.pageNotFound,
                500: AUTH_EVENTS.serverError
            }[response.status], response);
            return $q.reject(response);
        }
    }

    function AuthService($http, $rootScope, AUTH_EVENTS, $window, CommonService) {

        const service = {};

        let storageTokenTitle = 'token',
            storageUserTitle = 'username',
            ls = $window.localStorage;

        // forn user infomation (include token)
        service.createUserInfo = (username, token) => {
            ls.setItem(storageUserTitle, username);
            ls.setItem(storageTokenTitle, token);
        }
        service.destroy = () => {
            ls.removeItem(storageUserTitle);
            ls.removeItem(storageTokenTitle);
        }

        // only for Token
        service.createToken = (token) => {
            ls.setItem(storageTokenTitle, token);
        };

        service.getToken = () => ls.getItem(storageTokenTitle);

        service.removeToken = () => {
            ls.removeItem(storageTokenTitle);
        }

        // only for username
        service.getUsername = () => {
            ls.getItem(storageUserTitle)
        };

        service.login = user => CommonService.post("login", user);

        service.logout = () => CommonService.post("logout");

        // is session avalid
        service.isAuthenticated = () => {
            console.log(`isAuthenticated: ${!!ls.token}`);
            return !!ls.token;
        };

        return service;
    }


    function registerService($http, $rootScope, CommonService) {
        const service = {};

        service.register = user => CommonService.post("register", user);

        return service;
    }

    function userService($http, $rootScope, CommonService) {
        const service = {};

        return service;
    }


    // Global Services
    function CommonService($http) {
        // Set Content-Type to form-data which back-end can accept
        // $http.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=utf-8';

        const urlBackEnd = 'http://lofewfcalhost:8080/ws/';
        // var urlBackEnd = 'http://10.22.16.124:8088/ws/marketorder/getByClientOrderId/';
        const urlMiddleEnd = 'https://ExampleURL.92/';

        // requests status handle
        this.isReqSuccess = res => {
            console.log(res);
            return res.data.errCode == 0 ? true : false;
        };

        // handle Http error
        this.handleHttpErr = res => {
            console.log('Req Error', res);
        };

        // handle response error (base on API)
        this.handleResErr = res => {
            console.log(res);
            if (res.data.errDesc == undefined) {
                console.log('Error without discription');
                console.log(`msg: ${res.errDesc}`);
            } else {
                alert(res.data.errDesc);
                console.log(res.data);
            }
        };

        // post single command to back-end server
        this.post = (command, data) => commonTest ? $http({
            url: `test-data/ws/${command}`,
            method: 'GET'
        }) : $http({
            url: urlBackEnd + command,
            method: 'POST',
            data
        });

        // post multi commands to server
        this.postMulti = () => {

        };

        return this;
    }



})();

(() => {
    angular
        .module('app.components')
        .controller('clientOrderAddCtrl', clientOrderAddCtrl);

    function clientOrderAddCtrl($scope, $window) {


    }
})();

(() => {
    angular
        .module('app.components')
        .controller('clientOrderBuyCtrl', clientOrderBuyCtrl);

    /* @ngInject */
    clientOrderBuyCtrl.$inject = ['$scope'];

    function clientOrderBuyCtrl($scope) {
        $scope.stockInfo = [{ uuid: "_ABC", ric: "", name: "" },
            { uuid: "_ABC", ric: "", name: "" },
            { uuid: "_ABC", ric: "", name: "" }]
    }
})();

(() => {
    angular
        .module('app.components')
        .directive('clientOrderBuy', clientOrderBuy);

    function clientOrderBuy() {
        return {
            scope: {
                icon: "@"
            },
            templateUrl: 'js/components/client-order-add/client-order-buy.html',
            restrict: "E"
        };
    }
})();

(() => {
    angular
        .module('app.components')
        .factory('clientOrder', clientOrder);

    /* @ngInject */
    clientOrder.$inject = ['$resource'];

    function clientOrder($resource) {
        return $resource('ws/clientorder/list', {}, {
            query: {
                method: 'GET',
                params: {},
                isArray: true
            }
        });
    }
})();

(() => {
    angular
        .module('app.components')
        .directive('clientOrderSell', clientOrderSell);

    function clientOrderSell() {
        return {
            scope: {
                icon: "@"
            },
            templateUrl: 'js/components/client-order-add/client-order-sell.html',
            restrict: "E"
        };
    }
})();

(() => {
    angular
        .module('app.components')
        .controller('clientOrderUploadCtrl', clientOrderUploadCtrl);

    /* @ngInject */
    clientOrderUploadCtrl.$inject = ['$scope', 'fileUpload'];

    function clientOrderUploadCtrl($scope, fileUpload) {

        $scope.upload = () => {
            var file = $scope.myFile;
            var uploadUrl = 'ws/file/upload';
            fileUpload.uploadFileToUrl(file, uploadUrl);
        };
    }
})();

(() => {
    angular
        .module('app.components')
        .directive('clientOrderUpload', clientOrderUpload);

    function clientOrderUpload() {
        return {
            scope: {
                icon: "@"
            },
            templateUrl: 'js/components/client-order-add/client-order-upload.html',
            restrict: "E"
        };
    }
})();

(() => {
    angular
        .module('app.components')
        .directive('fileModel', fileModel);

    /* @ngInject */
    fileModel.$inject = ['$parse'];

    function fileModel($parse) {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                var model = $parse(attrs.fileModel);
                var modelSetter = model.assign;

                element.bind('change', function () {
                    scope.$apply(function () {
                        modelSetter(scope, element[0].files[0]);
                    });
                });
            }
        };

    }
})();

(() => {
    angular
        .module('app.components')
        .controller('CoListCtrl', CoListCtrl);

    CoListCtrl.$inject = ['$scope', '$rootScope', 'clientOrder', 'marketOrder', 'mo'];

    /* @ngInject */
    function CoListCtrl($scope, $rootScope, clientOrder, marketOrder, mo) {

        $scope.selectedClientOrderId = "";
        // $scope.marketOrderList = [];
        $scope.showMarketOrderList = id => {
            if ($scope.selectedClientOrderId != id) {
                $scope.selectedClientOrderId = id;
                queryMarketOrderList(id);
            }
        }

        $scope.closeMarketOrderList = () => {
            // $scope.close = !$scope.close;
            console.log($scope.selectedClientOrderId);
            $scope.selectedClientOrderId = "";
            console.log($scope.selectedClientOrderId);
        }

        // init
        clientOrder.query({}, res => {
            $scope.clientOrderItems = res;
        });


        // $interval(queryMarketOrderList, 1000);

        const queryMarketOrderList = (id) => {
            marketOrder.query({ coId: id }, res => {
                mo.set(res);
                $scope.$broadcast('market-orde-have-been-set');
                console.log(res)
            });
        }

    }

})();

(() => {
    angular
        .module('app.components')
        .controller('coPieCtrl', coPieCtrl);

    coPieCtrl.$inject = ['$scope', '$rootScope', '$location', '$http', '$window', '$cookies', '$state', '$interval', 'AUTH_EVENTS', 'CommonService', 'AuthService', 'marketOrder'];

    /* @ngInject */
    function coPieCtrl(
        $scope,
        $rootScope,
        $location,
        $http,
        $window,
        $cookies,
        $state,
        $interval,
        AUTH_EVENTS,
        CommonService,
        AuthService,
        marketOrder) {


        const option = {
            title: {
                text: 'Market Order Pie',
                subtext: '',
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['NYSE', 'NASDAQ', 'SSE', 'HKSE', 'SGSE']
            },
            series: [
                {
                    name: 'Exchange',
                    type: 'pie',
                    radius: '55%',
                    center: ['50%', '60%'],
                    data: [
                        { value: 335, name: 'NYSE' },
                        { value: 310, name: 'NASDAQ' },
                        { value: 234, name: 'SSE' },
                        { value: 135, name: 'HKSE' },
                        { value: 1548, name: 'SGSE' }
                    ],
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };

        const myChart = echarts.init(document.getElementById('main'));
        myChart.setOption(option);

    }
})();

(() => {
    angular
        .module('app.components')
        .directive('clientOrderPie', clientOrderPie);

    function clientOrderPie() {
        return {
            scope: {
                icon: "@"
            },
            templateUrl: 'js/components/client-order-pie/client-order-pie.html',
            restrict: "E"
        };
    }
})();

(() => {
    angular
        .module('app.components')
        .controller('LoginCtrl', LoginCtrl);

    LoginCtrl.$inject = ['$scope', '$rootScope', '$location', '$http', '$window', '$cookies', '$state', 'AUTH_EVENTS', 'CommonService', 'AuthService', 'Login'];

    /* @ngInject */
    function LoginCtrl(
        $scope,
        $rootScope,
        $location,
        $http,
        $window,
        $cookies,
        $state,
        AUTH_EVENTS,
        CommonService,
        AuthService,
        Login) {

        // TODO check if user is Login
        if (AuthService.isAuthenticated()) {
            $rootScope.$broadcast(AUTH_EVENTS.loginSuccess);
        }


        $scope.user = {};

        // $scope.alerts = []
        $scope.Alerts = {
            isShow: false,
            alerts: [],
            add(msg) {
                this.isShow = true;
                this.alerts = [];
                this.alerts.push(msg);
            },
            close(index) {
                this.isShow = false;
                this.alerts.splice(index, 1);
            }
        };


        $scope.login = user => {

            Login.login(user, res => {
                if (res.token != undefined && res.token != '') {
                    AuthService.createUserInfo(user.username, res.token);
                    $rootScope.currentUser = user.username;
                    $rootScope.$broadcast(AUTH_EVENTS.loginSuccess);
                    $scope.Alerts.close();
                } else {
                    $scope.Alerts.add({ type: "danger", msg: 'Login failed. Please try again.' });
                }
            }, res => {
                $scope.Alerts.add({ type: "danger", msg: res.data.reason || "Login failed." });
            });

            console.log(user);
        };
    }
})();

(() => {
    angular
        .module('app.components')
        .directive('loginPanel', loginPanel);

    loginPanel.$inject = ['$compile'];
    /* @ngInject */
    function loginPanel($compile) {
        return {
            restrict: 'E',
            scope: '@',
            templateUrl: 'js/components/login-panel/login-panel.html',
            link(scope) {
                // scope.name = "hel"
            }
        };
    }
})();

(() => {
    angular
        .module('app.components')
        .controller('MoListCtrl', MoListCtrl);

    MoListCtrl.$inject = ['$scope', '$rootScope', '$location', '$http', '$window', '$cookies', '$state', '$interval', 'AUTH_EVENTS', 'CommonService', 'AuthService', 'marketOrder', 'mo'];

    /* @ngInject */
    function MoListCtrl(
        $scope,
        $rootScope,
        $location,
        $http,
        $window,
        $cookies,
        $state,
        $interval,
        AUTH_EVENTS,
        CommonService,
        AuthService,
        marketOrder,
        mo) {
        
        // init
        $scope.marketOrderList = mo.get();

        $scope.$on('market-orde-have-been-set', function (data) {
            $scope.marketOrderList = mo.get();
        });
        $scope.$on('market-orde-have-been-updated', function (data) {
            $scope.marketOrderList = mo.get();
        });
    }
})();

(() => {
    angular
        .module('app.components')
        .directive('marketOrderList', marketOrderList);

    function marketOrderList() {
        return {
            scope: {
                icon: "@"
            },
            templateUrl: 'js/components/market-order-list/market-order-list.html',
            restrict: "E"
        };
    }
})();

(() => {
    angular
        .module('app.components')
        .factory('mo', mo);

    /* @ngInject */
    mo.$inject = ['$resource'];

    function mo($resource) {
        var service = {};

        service.marketOrderList = [];

        service.get = () => {
            return this.marketOrderList;
        };

        service.set = (data) => {
            this.marketOrderList = data;
        }

        service.rm = () => {
            this.marketOrderList = '';
        }

        return service;
    }
})();

/**
 * @author Shawn
 * @desc Controllers of the mainAPP
 */
(() => {
    angular
        .module('app.components')
        .controller('testCtrl', testCtrl);

    testCtrl.$inject = ['$scope', '$rootScope', '$location', '$http', 'AUTH_EVENTS', 'AuthService'];


    function testCtrl($scope, $rootScope, $location, $http, AUTH_EVENTS, AuthService) {
        $scope.obj = {
            url: "user/login.do",
            method: "POST",
            data: ""
        };
        $scope.test = obj => {
            const aa = (JSON.parse(obj.data));
            $scope.result = {
                result: "",
                status: "",
                msg: "",
                content: ""
            };
            $http({
                url: obj.url,
                method: obj.method,
                data: serializeData(aa)
            }).then(res => {
                console.log(res);
                $scope.result.result = "Req Success";
                $scope.result = res;
            }, res => {
                console.log(res);
                $scope.result = res;
                $scope.result.result = "Req Fail";
            });
        }
    }
})();

/**
 * @author Shawn
 * @desc Controllers of the mainAPP
 */

(() => {
    angular
        .module('app.components')
        .controller('testCtrl', testCtrl);

    testCtrl.$inject = ['$scope', '$rootScope', '$location', '$http', 'AUTH_EVENTS', 'AuthService'];

    function testCtrl($scope, $rootScope, $location, $http, AUTH_EVENTS, AuthService) {
        $scope.obj = {
            url: "user/login.do",
            method: "POST",
            data: ""
        };
        $scope.test = obj => {
            const aa = (JSON.parse(obj.data));
            $scope.result = {
                result: "",
                status: "",
                msg: "",
                content: ""
            };
            $http({
                url: obj.url,
                method: obj.method,
                data: serializeData(aa)
            }).then(res => {
                console.log(res);
                $scope.result.result = "Req Success";
                $scope.result = res;
            }, res => {
                console.log(res);
                $scope.result = res;
                $scope.result.result = "Req Fail";
            });
        }
    }
})();

/**
 * @author Shawn
 * @desc Controllers of the mainAPP
 */
(() => {
    angular
        .module('app.components')
        .controller('userCtrl', userCtrl);

    userCtrl.$inject = ['$scope', '$rootScope', '$location', 'AUTH_EVENTS', 'AuthService'];
    function userCtrl($scope, $rootScope, $location, AUTH_EVENTS, AuthService) {
        $scope.$on(AUTH_EVENTS.logoutSuccess, (event, data) => {
            $location.path("/");
        });

        if (!AuthService.isAuthenticated()) {
            console.log("user need login");
            $location.path("/login");
        }
    }
})();
(() => {
    angular
        .module('app.components')
        .directive('footer', footer);

    function footer() {
        return {
            scope: {
                icon: "@"
            },
            templateUrl: 'js/layout/footer/footer.html',
            restrict: "AE"
        };
    }
})();

(() => {
    angular.module('app.layout')
        // dashboard Sidebar
        .controller("SidebarCtrl", SidebarCtrl);

    SidebarCtrl.$inject = ["$scope", "$cookies"];


    function SidebarCtrl($scope, $cookies) {
        /**
         * Sidebar Toggle & Cookies Control
         */
        // const mobileView = 992;
        // $scope.getWidth = () => window.innerWidth;
        // $scope.$watch($scope.getWidth, (newValue, oldValue) => {
        //     if (newValue >= mobileView) {
        //         if (angular.isDefined($cookies.get('toggle'))) {
        //             $scope.toggle = !$cookies.get('toggle') ? true : false;
        //         } else {
        //             $scope.toggle = false;
        //         }
        //     } else {
        //         $scope.toggle = true;
        //     }
        // });
        $scope.toggleSidebar = () => {
            $scope.toggle = !$scope.toggle;
            // $cookies.put('toggle', $scope.toggle);
        };
        // window.onresize = () => {
        //     $scope.$apply();
        // };
    }
})();
(() => {
    angular.module('app.widgets')
        .controller('AlertsCtrl', AlertsCtrl);

    AlertsCtrl.$inject = ['$scope'];
    function AlertsCtrl($scope) {
        $scope.alerts = [{
            type: 'success',
            msg: 'Thanks for visiting! Feel free to create pull requests to improve the dashboard!'
        }, {
                type: 'danger',
                msg: 'Found a bug? Create an issue with as many details as you can.'
            }];

        $scope.addAlert = () => {
            $scope.alerts.push({
                msg: 'Another alert!'
            });
        };

        $scope.closeAlert = index => {
            $scope.alerts.splice(index, 1);
        };
    }
})();
(() => {
    angular
        .module('app.widgets')
        .directive("rdLoading", rdLoading);

    function rdLoading() {
        const d = {
            restrict: "AE",
            template: '<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'
        };
        return d
    }
})();

(() => {
    angular
        .module('app.widgets')
        // angular-ui Modal
        .controller('ModalDemoCtrl', ModalDemoCtrl);

    ModalDemoCtrl.$inject = ['$scope', '$uibModal', '$log'];
    function ModalDemoCtrl($scope, $uibModal, $log) {
        $scope.items = ['item1', 'item2', 'item3'];
        $scope.animationsEnabled = true;
        $scope.open = size => {
            const modalInstance = $uibModal.open({
                animation: $scope.animationsEnabled,
                templateUrl: 'myModalContent.html',
                controller: 'ModalInstanceCtrl',
                size,
                resolve: {
                    items() {
                        return $scope.items;
                    }
                }
            });

            modalInstance.result.then(selectedItem => {
                $scope.selected = selectedItem;
            }, () => {
                $log.info(`Modal dismissed at: ${new Date()}`);
            });
        };
        $scope.toggleAnimation = () => {
            $scope.animationsEnabled = !$scope.animationsEnabled;
        };

    }
})();

(() => {
    angular
        .module('app.widgets')

        // Please note that $uibModalInstance represents a modal window (instance) dependency.
        // It is not the same as the $uibModal service used above.
        // angular-ui Modal
        .controller('ModalInstanceCtrl', ModalInstanceCtrl);

    ModalInstanceCtrl.$inject = ['$scope', '$uibModalInstance', 'items'];
    function ModalInstanceCtrl($scope, $uibModalInstance, items) {
        $scope.items = items;
        $scope.selected = {
            item: $scope.items[0]
        };

        $scope.ok = () => {
            $uibModalInstance.close($scope.selected.item);
        };

        $scope.cancel = () => {
            $uibModalInstance.dismiss('cancel');
        };
    }
})();
(() => {
    angular.module('app.widgets')

        // angular-ui progressBar
        .controller('ProgressDemoCtrl', ProgressDemoCtrl);
    ProgressDemoCtrl.$inject = ['$scope'];

    function ProgressDemoCtrl($scope) {
        $scope.max = 200;

        $scope.random = () => {
            const value = Math.floor(Math.random() * 100 + 1);
            let type;

            if (value < 25) {
                type = 'warning';
            } else if (value < 50) {
                type = 'info';
            } else if (value < 75) {
                type = 'success';
            } else {
                type = 'success';
            }

            $scope.showWarning = type === 'danger' || type === 'warning';

            $scope.dynamic = value;
            $scope.type = type;
        };

        $scope.random();
        
        $scope.randomStacked = function() {
            $scope.stacked = [];
            var types = ['success', 'info', 'warning', 'danger'];

            // for (var i = 0, n = Math.floor(Math.random() * 4 + 1); i < n; i++) {
            //     var index = Math.floor(Math.random() * 4);
            //     $scope.stacked.push({
            //         value: Math.floor(Math.random() * 30 + 1),
            //         type: types[index]
            //     });
            // }
        };

        $scope.randomStacked();
    }
})();
(() => {
    angular
        .module('app.widgets')
        .directive('rdWidget', rdWidget);

    function rdWidget() {
        const directive = {
            transclude: true,
            template: '<div class="widget" ng-transclude></div>',
            restrict: 'EA'
        };
        return directive;

        function link(scope, element, attrs) {
            /* */
        }
    }
})();

(() => {
    angular
    .module('app.widgets')
    .directive("rdWidgetBody", rdWidgetBody);

    function rdWidgetBody() {
        const d = {
            requires: "^rdWidget",
            scope: {
                loading: "@?",
                classes: "@?"
            },
            transclude: !0,
            template: '<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',
            restrict: "E"
        };
        return d
    }
})();

(() => {
    angular
    .module('app.widgets')
    .directive("rdWidgetFooter", rdWidgetFooter);

    function rdWidgetFooter() {
        const e = {
            requires: "^rdWidget",
            transclude: !0,
            template: '<div class="widget-footer" ng-transclude></div>',
            restrict: "E"
        };
        return e
    }
})();

(() => {
    angular
        .module('app.widgets')
        .directive("rdWidgetHeader", rdWidgetTitle);


    function rdWidgetTitle() {
        const e = {
            requires: "^rdWidget",
            scope: {
                title: "@",
                icon: "@"
            },
            transclude: !0,
            template: '<div class="widget-header"><i class="fa" ng-class="icon"></i> {{title}} <div class="pull-right" ng-transclude></div></div>',
            restrict: "E"
        };
        return e
    }
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJ0b29sa2l0LmpzIiwiY29tcG9uZW50cy9jbGllbnQtb3JkZXItYWRkLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL2NsaWVudC1vcmRlci5zZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9maWxlLXVwbG9hZC5zZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9sb2dpbi1wYW5lbC5zZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9tYXJrZXQtb3JkZXItbGlzdC5zZXJ2aWNlLmpzIiwiY29yZS9jb3JlLmNvbmZpZy5qcyIsImNvcmUvY29yZS5jb250cm9sbGVycy5qcyIsImNvcmUvY29yZS5kaXJlY3RpdmVzLmpzIiwiY29yZS9jb3JlLmZpbHRlcnMuanMiLCJjb3JlL2NvcmUucm91dGVyLmpzIiwiY29yZS9jb3JlLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL2NsaWVudC1vcmRlci1hZGQvY2xpZW50LW9yZGVyLWFkZC5jb250cm9sbGVyLmpzIiwiY29tcG9uZW50cy9jbGllbnQtb3JkZXItYWRkL2NsaWVudC1vcmRlci1idXkuY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvY2xpZW50LW9yZGVyLWFkZC9jbGllbnQtb3JkZXItYnV5LmRpcmVjdGl2ZS5qcyIsImNvbXBvbmVudHMvY2xpZW50LW9yZGVyLWFkZC9jbGllbnQtb3JkZXItbGlzdC5zZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9jbGllbnQtb3JkZXItYWRkL2NsaWVudC1vcmRlci1zZWxsLmRpcmVjdGl2ZS5qcyIsImNvbXBvbmVudHMvY2xpZW50LW9yZGVyLWFkZC9jbGllbnQtb3JkZXItdXBsb2FkLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2NsaWVudC1vcmRlci1hZGQvY2xpZW50LW9yZGVyLXVwbG9hZC5kaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL2NsaWVudC1vcmRlci1hZGQvZmlsZS1tb2RlbC5kaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL2NsaWVudC1vcmRlci1saXN0L2NsaWVudC1vcmRlci1saXN0LmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2NsaWVudC1vcmRlci1waWUvY2xpZW50LW9yZGVyLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2NsaWVudC1vcmRlci1waWUvY2xpZW50LW9yZGVyLmRpcmVjdGl2ZS5qcyIsImNvbXBvbmVudHMvbG9naW4tcGFuZWwvbG9naW4tcGFuZWwuY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvbG9naW4tcGFuZWwvbG9naW4tcGFuZWwuZGlyZWN0aXZlLmpzIiwiY29tcG9uZW50cy9tYXJrZXQtb3JkZXItbGlzdC9tYXJrZXQtb3JkZXItbGlzdC5jb250cm9sbGVyLmpzIiwiY29tcG9uZW50cy9tYXJrZXQtb3JkZXItbGlzdC9tYXJrZXQtb3JkZXItbGlzdC5kaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL21hcmtldC1vcmRlci1saXN0L21vLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL3JlZ2lzdGVyLXBhbmVsL3JlZ2lzdGVyLXBhbmVsLmNvbnRyb2xsZXJzLmpzIiwiY29tcG9uZW50cy90ZXN0L3Rlc3QuY29udHJvbGxlcnMuanMiLCJjb21wb25lbnRzL3VzZXIvdXNlci5jb250cm9sbGVycy5qcyIsImxheW91dC9mb290ZXIvZm9vdGVyLmRpcmVjdGl2ZS5qcyIsImxheW91dC9zaWRlYmFyL3NpZGViYXIuY29udHJvbGxlci5qcyIsIndpZGdldHMvYWxlcnRzL2FsZXJ0cy1kZW1vLmNvbnRyb2xsZXIuanMiLCJ3aWRnZXRzL2xvYWRpbmcvbG9hZGluZy5kaXJlY3RpdmVzLmpzIiwid2lkZ2V0cy9tb2RhbC9tb2RhbC1kZW1vLmNvbnRyb2xsZXIuanMiLCJ3aWRnZXRzL21vZGFsL21vZGFsLWluc3RhbmNlLmNvbnRyb2xsZXIuanMiLCJ3aWRnZXRzL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLWRlbW8uY29udHJvbGxlci5qcyIsIndpZGdldHMvd2lkZ2V0L3dpZGdldC5kaXJlY3RpdmVzLmpzIiwid2lkZ2V0cy93aWRnZXQtYm9keS9ib2R5LmRpcmVjdGl2ZXMuanMiLCJ3aWRnZXRzL3dpZGdldC1mb290ZXIvZm9vdGVyLmRpcmVjdGl2ZXMuanMiLCJ3aWRnZXRzL3dpZGdldC1oZWFkZXIvaGVhZGVyLmRpcmVjdGl2ZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoRkE7QUFDQTtBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCgpID0+IHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdtYWluQXBwJywgW1xyXG4gICAgICAgICdhcHAuY29yZScsXHJcbiAgICAgICAgJ2FwcC5sYXlvdXQnLFxyXG4gICAgICAgICdhcHAuY29tcG9uZW50cycsXHJcbiAgICAgICAgJ2FwcC53aWRnZXRzJ1xyXG4gICAgXSk7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb3JlJywgW1xyXG4gICAgICAgICd1aS5yb3V0ZXInLFxyXG4gICAgICAgICd1aS5ib290c3RyYXAnLFxyXG4gICAgICAgICd1aS5sYXlvdXQnLFxyXG4gICAgICAgICduZ1Jlc291cmNlJyxcclxuICAgICAgICAnbmdDb29raWVzJyxcclxuICAgICAgICAnbmdBbmltYXRlJ1xyXG4gICAgXSk7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC53aWRnZXRzJywgW1xyXG4gICAgICAgICdhcHAuY29yZSdcclxuICAgIF0pO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29tcG9uZW50cycsIFtcclxuICAgICAgICAnYXBwLmNvcmUnLFxyXG4gICAgICAgICdhcHAud2lkZ2V0cydcclxuICAgIF0pO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAubGF5b3V0JywgW1xyXG4gICAgICAgICdhcHAuY29yZSdcclxuICAgIF0pO1xyXG5cclxuXHJcbn0pKCk7XHJcbiIsIlxyXG4vLyBTYW1wbGU6IHthZGRyLmxvY2F0aW9uOmEsYWRkci5udW1iZXI6Yn0gPT0+IGFkZHIlNUJsb2NhdGlvbiU1RD1hJmFkZHIlNUJudW1iZXIlNUQ9YlxyXG5jb25zdCBzZXJpYWxpemVEYXRhID0gKG9iaiwgcHJlZml4KSA9PiB7XHJcbiAgICBjb25zdCBzdHIgPSBbXTtcclxuICAgIGZvciAobGV0IHAgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cob2JqKTtcclxuICAgICAgICAgICAgdmFyIGsgPSBwcmVmaXggPyBgJHtwcmVmaXh9WyR7cH1dYCA6IHAsXHJcbiAgICAgICAgICAgICAgICB2ID0gb2JqW3BdO1xyXG4gICAgICAgICAgICBzdHIucHVzaCh0eXBlb2YgdiA9PSBcIm9iamVjdFwiID9cclxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZURhdGEodiwgaykgOlxyXG4gICAgICAgICAgICAgICAgYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGspfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2KX1gKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwKSkge1xyXG4gICAgICAgICAgICAvLyAgIHZhciBrID0gcHJlZml4ID8gcHJlZml4ICsgXCJbXCIgKyBwICsgXCJdXCIgOiBwLCB2ID0gb2JqW3BdO1xyXG4gICAgICAgICAgICB2YXIgayA9IHByZWZpeCA/IGAke3ByZWZpeH0uJHtwfWAgOiBwLFxyXG4gICAgICAgICAgICAgICAgdiA9IG9ialtwXTtcclxuICAgICAgICAgICAgc3RyLnB1c2godHlwZW9mIHYgPT0gXCJvYmplY3RcIiA/XHJcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVEYXRhKHYsIGspIDpcclxuICAgICAgICAgICAgICAgIGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtlbmNvZGVVUklDb21wb25lbnQodil9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0ci5qb2luKFwiJlwiKTtcclxufTtcclxuXHJcbi8vIFNhbXBsZTogMzUlID09PiAwLjM1XHJcbmNvbnN0IHBlcmNlbnRUb051bSA9IHBhcmFtID0+IHtcclxuICAgIHBhcmFtID0gcGFyYW0udG9TdHJpbmcoKS5yZXBsYWNlKCclJywgJycpO1xyXG4gICAgaWYgKHBhcmFtICE9IHVuZGVmaW5lZCAmJiBpc05hTihwYXJhbSkgPT0gZmFsc2UpIHtcclxuICAgICAgICByZXR1cm4gcGFyYW0gKiAxMDAwIC8gMTAwMDAwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vKipcclxuKiAgU2VjdXJlIEhhc2ggQWxnb3JpdGhtIChTSEEyNTYpXHJcbiogIGh0dHA6Ly93d3cud2VidG9vbGtpdC5pbmZvL1xyXG4qICBPcmlnaW5hbCBjb2RlIGJ5IEFuZ2VsIE1hcmluLCBQYXVsIEpvaG5zdG9uLlxyXG4qKi9cclxuY29uc3QgU0hBMjU2ID0gcyA9PiB7Y29uc3QgY2hyc3ogPSA4O2NvbnN0IGhleGNhc2UgPSAwO2Z1bmN0aW9uIHNhZmVfYWRkKHgsIHkpIHtjb25zdCBsc3cgPSAoeCAmIDB4RkZGRikgKyAoeSAmIDB4RkZGRik7Y29uc3QgbXN3ID0gKHggPj4gMTYpICsgKHkgPj4gMTYpICsgKGxzdyA+PiAxNik7cmV0dXJuIChtc3cgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7fWZ1bmN0aW9uIFMoWCwgbikge3JldHVybiAoWCA+Pj4gbikgfCAoWCA8PCAoMzIgLSBuKSk7fWZ1bmN0aW9uIFIoWCwgbikge3JldHVybiAoWCA+Pj4gbik7fWZ1bmN0aW9uIENoKHgsIHksIHopIHtyZXR1cm4gKCh4ICYgeSkgXiAoKH54KSAmIHopKTt9ZnVuY3Rpb24gTWFqKHgsIHksIHopIHtyZXR1cm4gKCh4ICYgeSkgXiAoeCAmIHopIF4gKHkgJiB6KSk7fWZ1bmN0aW9uIFNpZ21hMDI1Nih4KSB7cmV0dXJuIChTKHgsIDIpIF4gUyh4LCAxMykgXiBTKHgsIDIyKSk7fWZ1bmN0aW9uIFNpZ21hMTI1Nih4KSB7cmV0dXJuIChTKHgsIDYpIF4gUyh4LCAxMSkgXiBTKHgsIDI1KSk7fWZ1bmN0aW9uIEdhbW1hMDI1Nih4KSB7cmV0dXJuIChTKHgsIDcpIF4gUyh4LCAxOCkgXiBSKHgsIDMpKTt9ZnVuY3Rpb24gR2FtbWExMjU2KHgpIHtyZXR1cm4gKFMoeCwgMTcpIF4gUyh4LCAxOSkgXiBSKHgsIDEwKSk7fWZ1bmN0aW9uIGNvcmVfc2hhMjU2KG0sIGwpIHtcclxuICAgIGNvbnN0IEsgPSBuZXcgQXJyYXkoMHg0MjhBMkY5OCwgMHg3MTM3NDQ5MSwgMHhCNUMwRkJDRiwgMHhFOUI1REJBNSwgMHgzOTU2QzI1QiwgMHg1OUYxMTFGMSwgMHg5MjNGODJBNCwgMHhBQjFDNUVENSwgMHhEODA3QUE5OCwgMHgxMjgzNUIwMSwgMHgyNDMxODVCRSwgMHg1NTBDN0RDMywgMHg3MkJFNUQ3NCwgMHg4MERFQjFGRSwgMHg5QkRDMDZBNywgMHhDMTlCRjE3NCwgMHhFNDlCNjlDMSwgMHhFRkJFNDc4NiwgMHhGQzE5REM2LCAweDI0MENBMUNDLCAweDJERTkyQzZGLCAweDRBNzQ4NEFBLCAweDVDQjBBOURDLCAweDc2Rjk4OERBLCAweDk4M0U1MTUyLCAweEE4MzFDNjZELCAweEIwMDMyN0M4LCAweEJGNTk3RkM3LCAweEM2RTAwQkYzLCAweEQ1QTc5MTQ3LCAweDZDQTYzNTEsIDB4MTQyOTI5NjcsIDB4MjdCNzBBODUsIDB4MkUxQjIxMzgsIDB4NEQyQzZERkMsIDB4NTMzODBEMTMsIDB4NjUwQTczNTQsIDB4NzY2QTBBQkIsIDB4ODFDMkM5MkUsIDB4OTI3MjJDODUsIDB4QTJCRkU4QTEsIDB4QTgxQTY2NEIsIDB4QzI0QjhCNzAsIDB4Qzc2QzUxQTMsIDB4RDE5MkU4MTksIDB4RDY5OTA2MjQsIDB4RjQwRTM1ODUsIDB4MTA2QUEwNzAsIDB4MTlBNEMxMTYsIDB4MUUzNzZDMDgsIDB4Mjc0ODc3NEMsIDB4MzRCMEJDQjUsIDB4MzkxQzBDQjMsIDB4NEVEOEFBNEEsIDB4NUI5Q0NBNEYsIDB4NjgyRTZGRjMsIDB4NzQ4RjgyRUUsIDB4NzhBNTYzNkYsIDB4ODRDODc4MTQsIDB4OENDNzAyMDgsIDB4OTBCRUZGRkEsIDB4QTQ1MDZDRUIsIDB4QkVGOUEzRjcsIDB4QzY3MTc4RjIpO2NvbnN0IEhBU0ggPSBuZXcgQXJyYXkoMHg2QTA5RTY2NywgMHhCQjY3QUU4NSwgMHgzQzZFRjM3MiwgMHhBNTRGRjUzQSwgMHg1MTBFNTI3RiwgMHg5QjA1Njg4QywgMHgxRjgzRDlBQiwgMHg1QkUwQ0QxOSk7Y29uc3QgVyA9IG5ldyBBcnJheSg2NCk7XHJcbiAgICBsZXQgYTtcclxuICAgIGxldCBiO1xyXG4gICAgbGV0IGM7XHJcbiAgICBsZXQgZDtcclxuICAgIGxldCBlO1xyXG4gICAgbGV0IGY7XHJcbiAgICBsZXQgZztcclxuICAgIGxldCBoO1xyXG4gICAgdmFyIGk7XHJcbiAgICB2YXIgajtcclxuICAgIGxldCBUMSwgVDI7bVtsID4+IDVdIHw9IDB4ODAgPDwgKDI0IC0gbCAlIDMyKTttWygobCArIDY0ID4+IDkpIDw8IDQpICsgMTVdID0gbDtmb3IgKHZhciBpID0gMDsgaSA8IG0ubGVuZ3RoOyBpICs9IDE2KSB7YSA9IEhBU0hbMF07YiA9IEhBU0hbMV07YyA9IEhBU0hbMl07ZCA9IEhBU0hbM107ZSA9IEhBU0hbNF07ZiA9IEhBU0hbNV07ZyA9IEhBU0hbNl07aCA9IEhBU0hbN107Zm9yICh2YXIgaiA9IDA7IGogPCA2NDsgaisrKSB7aWYgKGogPCAxNikgV1tqXSA9IG1baiArIGldO2Vsc2UgV1tqXSA9IHNhZmVfYWRkKHNhZmVfYWRkKHNhZmVfYWRkKEdhbW1hMTI1NihXW2ogLSAyXSksIFdbaiAtIDddKSwgR2FtbWEwMjU2KFdbaiAtIDE1XSkpLCBXW2ogLSAxNl0pO1QxID0gc2FmZV9hZGQoc2FmZV9hZGQoc2FmZV9hZGQoc2FmZV9hZGQoaCwgU2lnbWExMjU2KGUpKSwgQ2goZSwgZiwgZykpLCBLW2pdKSwgV1tqXSk7VDIgPSBzYWZlX2FkZChTaWdtYTAyNTYoYSksIE1haihhLCBiLCBjKSk7aCA9IGc7ZyA9IGY7ZiA9IGU7ZSA9IHNhZmVfYWRkKGQsIFQxKTtkID0gYztjID0gYjtiID0gYTthID0gc2FmZV9hZGQoVDEsIFQyKTt9SEFTSFswXSA9IHNhZmVfYWRkKGEsIEhBU0hbMF0pO0hBU0hbMV0gPSBzYWZlX2FkZChiLCBIQVNIWzFdKTtIQVNIWzJdID0gc2FmZV9hZGQoYywgSEFTSFsyXSk7SEFTSFszXSA9IHNhZmVfYWRkKGQsIEhBU0hbM10pO0hBU0hbNF0gPSBzYWZlX2FkZChlLCBIQVNIWzRdKTtIQVNIWzVdID0gc2FmZV9hZGQoZiwgSEFTSFs1XSk7SEFTSFs2XSA9IHNhZmVfYWRkKGcsIEhBU0hbNl0pO0hBU0hbN10gPSBzYWZlX2FkZChoLCBIQVNIWzddKTt9cmV0dXJuIEhBU0g7XHJcbn1mdW5jdGlvbiBzdHIyYmluYihzdHIpIHtjb25zdCBiaW4gPSBBcnJheSgpO2NvbnN0IG1hc2sgPSAoMSA8PCBjaHJzeikgLSAxO2ZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aCAqIGNocnN6OyBpICs9IGNocnN6KSB7YmluW2kgPj4gNV0gfD0gKHN0ci5jaGFyQ29kZUF0KGkgLyBjaHJzeikgJiBtYXNrKSA8PCAoMjQgLSBpICUgMzIpO31yZXR1cm4gYmluO31mdW5jdGlvbiBVdGY4RW5jb2RlKHN0cmluZykge3N0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9ybi9nLCBcIm5cIik7bGV0IHV0ZnRleHQgPSBcIlwiO2ZvciAobGV0IG4gPSAwOyBuIDwgc3RyaW5nLmxlbmd0aDsgbisrKSB7Y29uc3QgYyA9IHN0cmluZy5jaGFyQ29kZUF0KG4pO2lmIChjIDwgMTI4KSB7dXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO30gZWxzZSBpZiAoKGMgPiAxMjcpICYmIChjIDwgMjA0OCkpIHt1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgPj4gNikgfCAxOTIpO3V0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyAmIDYzKSB8IDEyOCk7fSBlbHNlIHt1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgPj4gMTIpIHwgMjI0KTt1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjID4+IDYpICYgNjMpIHwgMTI4KTt1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpO319cmV0dXJuIHV0ZnRleHQ7fWZ1bmN0aW9uIGJpbmIyaGV4KGJpbmFycmF5KSB7Y29uc3QgaGV4X3RhYiA9IGhleGNhc2UgPyBcIjAxMjM0NTY3ODlBQkNERUZcIiA6IFwiMDEyMzQ1Njc4OWFiY2RlZlwiO2xldCBzdHIgPSBcIlwiO2ZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJyYXkubGVuZ3RoICogNDsgaSsrKSB7c3RyICs9IGhleF90YWIuY2hhckF0KChiaW5hcnJheVtpID4+IDJdID4+ICgoMyAtIGkgJSA0KSAqIDggKyA0KSkgJiAweEYpICsgaGV4X3RhYi5jaGFyQXQoKGJpbmFycmF5W2kgPj4gMl0gPj4gKCgzIC0gaSAlIDQpICogOCkpICYgMHhGKTt9cmV0dXJuIHN0cjt9cyA9IFV0ZjhFbmNvZGUocyk7cmV0dXJuIGJpbmIyaGV4KGNvcmVfc2hhMjU2KHN0cjJiaW5iKHMpLCBzLmxlbmd0aCAqIGNocnN6KSk7fTtcclxuXHJcbi8qKlxyXG4qICBTZWN1cmUgSGFzaCBBbGdvcml0aG0gKFNIQTEpXHJcbiogIGh0dHA6Ly93d3cud2VidG9vbGtpdC5pbmZvL1xyXG4qKi9cclxuY29uc3QgU0hBMSA9IG1zZyA9PiB7ZnVuY3Rpb24gcm90YXRlX2xlZnQobiwgcykge2NvbnN0IHQ0ID0gKCBuPDxzICkgfCAobj4+PigzMi1zKSk7cmV0dXJuIHQ0O307ZnVuY3Rpb24gbHNiX2hleCh2YWwpIHtsZXQgc3RyPVwiXCI7bGV0IGk7bGV0IHZoO2xldCB2bDtmb3IoIGk9MDsgaTw9NjsgaSs9MiApIHt2aCA9ICh2YWw+Pj4oaSo0KzQpKSYweDBmO3ZsID0gKHZhbD4+PihpKjQpKSYweDBmO3N0ciArPSB2aC50b1N0cmluZygxNikgKyB2bC50b1N0cmluZygxNik7fXJldHVybiBzdHI7fTtmdW5jdGlvbiBjdnRfaGV4KHZhbCkge2xldCBzdHI9XCJcIjtsZXQgaTtsZXQgdjtmb3IoIGk9NzsgaT49MDsgaS0tICkge3YgPSAodmFsPj4+KGkqNCkpJjB4MGY7c3RyICs9IHYudG9TdHJpbmcoMTYpO31yZXR1cm4gc3RyO307ZnVuY3Rpb24gVXRmOEVuY29kZShzdHJpbmcpIHtzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvcm4vZyxcIm5cIik7bGV0IHV0ZnRleHQgPSBcIlwiO2ZvciAobGV0IG4gPSAwOyBuIDwgc3RyaW5nLmxlbmd0aDsgbisrKSB7Y29uc3QgYyA9IHN0cmluZy5jaGFyQ29kZUF0KG4pO2lmIChjIDwgMTI4KSB7dXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO31lbHNlIGlmKChjID4gMTI3KSAmJiAoYyA8IDIwNDgpKSB7dXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjID4+IDYpIHwgMTkyKTt1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpO31lbHNlIHt1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgPj4gMTIpIHwgMjI0KTt1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjID4+IDYpICYgNjMpIHwgMTI4KTt1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpO319cmV0dXJuIHV0ZnRleHQ7fTtsZXQgYmxvY2tzdGFydDtsZXQgaSwgajtjb25zdCBXID0gbmV3IEFycmF5KDgwKTtsZXQgSDAgPSAweDY3NDUyMzAxO2xldCBIMSA9IDB4RUZDREFCODk7bGV0IEgyID0gMHg5OEJBRENGRTtsZXQgSDMgPSAweDEwMzI1NDc2O2xldCBINCA9IDB4QzNEMkUxRjA7bGV0IEEsIEIsIEMsIEQsIEU7dmFyIHRlbXA7bXNnID0gVXRmOEVuY29kZShtc2cpO2NvbnN0IG1zZ19sZW4gPSBtc2cubGVuZ3RoO2NvbnN0IHdvcmRfYXJyYXkgPSBuZXcgQXJyYXkoKTtmb3IoIGk9MDsgaTxtc2dfbGVuLTM7IGkrPTQgKSB7aiA9IG1zZy5jaGFyQ29kZUF0KGkpPDwyNCB8IG1zZy5jaGFyQ29kZUF0KGkrMSk8PDE2IHxtc2cuY2hhckNvZGVBdChpKzIpPDw4IHwgbXNnLmNoYXJDb2RlQXQoaSszKTt3b3JkX2FycmF5LnB1c2goaik7fXN3aXRjaCggbXNnX2xlbiAlIDQgKSB7Y2FzZSAwOmkgPSAweDA4MDAwMDAwMDticmVhaztjYXNlIDE6aSA9IG1zZy5jaGFyQ29kZUF0KG1zZ19sZW4tMSk8PDI0IHwgMHgwODAwMDAwO2JyZWFrO2Nhc2UgMjppID0gbXNnLmNoYXJDb2RlQXQobXNnX2xlbi0yKTw8MjQgfCBtc2cuY2hhckNvZGVBdChtc2dfbGVuLTEpPDwxNiB8IDB4MDgwMDA7YnJlYWs7Y2FzZSAzOmkgPSBtc2cuY2hhckNvZGVBdChtc2dfbGVuLTMpPDwyNCB8IG1zZy5jaGFyQ29kZUF0KG1zZ19sZW4tMik8PDE2IHwgbXNnLmNoYXJDb2RlQXQobXNnX2xlbi0xKTw8OCB8IDB4ODA7YnJlYWs7fXdvcmRfYXJyYXkucHVzaChpKTt3aGlsZSggKHdvcmRfYXJyYXkubGVuZ3RoICUgMTYpICE9IDE0ICkgd29yZF9hcnJheS5wdXNoKDApO3dvcmRfYXJyYXkucHVzaChtc2dfbGVuPj4+MjkpO3dvcmRfYXJyYXkucHVzaCgobXNnX2xlbjw8MykmMHgwZmZmZmZmZmYpO2ZvciAoIGJsb2Nrc3RhcnQ9MDsgYmxvY2tzdGFydDx3b3JkX2FycmF5Lmxlbmd0aDsgYmxvY2tzdGFydCs9MTYgKSB7Zm9yKCBpPTA7IGk8MTY7IGkrKyApIFdbaV0gPSB3b3JkX2FycmF5W2Jsb2Nrc3RhcnQraV07Zm9yKCBpPTE2OyBpPD03OTsgaSsrICkgV1tpXSA9IHJvdGF0ZV9sZWZ0KFdbaS0zXSBeIFdbaS04XSBeIFdbaS0xNF0gXiBXW2ktMTZdLCAxKTtBID0gSDA7QiA9IEgxO0MgPSBIMjtEID0gSDM7RSA9IEg0O2ZvciggaT0gMDsgaTw9MTk7IGkrKyApIHt0ZW1wID0gKHJvdGF0ZV9sZWZ0KEEsNSkgKyAoKEImQykgfCAofkImRCkpICsgRSArIFdbaV0gKyAweDVBODI3OTk5KSAmIDB4MGZmZmZmZmZmO0UgPSBEO0QgPSBDO0MgPSByb3RhdGVfbGVmdChCLDMwKTtCID0gQTtBID0gdGVtcDt9Zm9yKCBpPTIwOyBpPD0zOTsgaSsrICkge3RlbXAgPSAocm90YXRlX2xlZnQoQSw1KSArIChCIF4gQyBeIEQpICsgRSArIFdbaV0gKyAweDZFRDlFQkExKSAmIDB4MGZmZmZmZmZmO0UgPSBEO0QgPSBDO0MgPSByb3RhdGVfbGVmdChCLDMwKTtCID0gQTtBID0gdGVtcDt9Zm9yKCBpPTQwOyBpPD01OTsgaSsrICkge3RlbXAgPSAocm90YXRlX2xlZnQoQSw1KSArICgoQiZDKSB8IChCJkQpIHwgKEMmRCkpICsgRSArIFdbaV0gKyAweDhGMUJCQ0RDKSAmIDB4MGZmZmZmZmZmO0UgPSBEO0QgPSBDO0MgPSByb3RhdGVfbGVmdChCLDMwKTtCID0gQTtBID0gdGVtcDt9Zm9yKCBpPTYwOyBpPD03OTsgaSsrICkge3RlbXAgPSAocm90YXRlX2xlZnQoQSw1KSArIChCIF4gQyBeIEQpICsgRSArIFdbaV0gKyAweENBNjJDMUQ2KSAmIDB4MGZmZmZmZmZmO0UgPSBEO0QgPSBDO0MgPSByb3RhdGVfbGVmdChCLDMwKTtCID0gQTtBID0gdGVtcDt9SDAgPSAoSDAgKyBBKSAmIDB4MGZmZmZmZmZmO0gxID0gKEgxICsgQikgJiAweDBmZmZmZmZmZjtIMiA9IChIMiArIEMpICYgMHgwZmZmZmZmZmY7SDMgPSAoSDMgKyBEKSAmIDB4MGZmZmZmZmZmO0g0ID0gKEg0ICsgRSkgJiAweDBmZmZmZmZmZjt9dmFyIHRlbXAgPSBjdnRfaGV4KEgwKSArIGN2dF9oZXgoSDEpICsgY3Z0X2hleChIMikgKyBjdnRfaGV4KEgzKSArIGN2dF9oZXgoSDQpO3JldHVybiB0ZW1wLnRvTG93ZXJDYXNlKCk7fTtcclxuXHJcblxyXG4vLyBHcmFiIHRoZSBmaWxlcyBhbmQgc2V0IHRoZW0gdG8gb3VyIHZhcmlhYmxlXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gPGlucHV0IGlkPVwiZmlsZXVwbG9hZFwiIHR5cGU9XCJmaWxlXCIgY2xhc3M9XCJcIiBuYW1lPVwiZmlsZXNbXVwiIGRhdGEtdXJsPVwidXBsb2FkLmRvXCIgbXVsdGlwbGU+XHJcbmZ1bmN0aW9uIHByZXBhcmVVcGxvYWQoZXZlbnQpIHtcclxuICAgIGNvbnN0IGVsZSA9ICQodGhpcykuc2libGluZ3MoJy5oaWRkZW4nKVswXTtcclxuICAgIHVwbG9hZEZpbGVzKGV2ZW50LnRhcmdldC5maWxlcywgZWxlKTtcclxuXHJcbiAgICAvLyBlbGUudmFsdWUgPSByZXNGaWxlSWQ7XHJcbiAgICAvL1xyXG4gICAgLy8gdHJ5IHtcclxuICAgIC8vICAgICB2YXIgcmVzRmlsZUlkID0gdXBsb2FkRmlsZXMoZXZlbnQudGFyZ2V0LmZpbGVzKTtcclxuICAgIC8vICAgICB2YXIgZWxlID0gJCh0aGlzKS5zaWJsaW5ncygnLmhpZGRlbicpWzBdLnZhbHVlO1xyXG4gICAgLy8gICAgIHZhciBhcnJheSA9IGVsZSA9PSBcIlwiPyBbXSA6IGVsZS5zcGxpdCgnLCcpIDtcclxuICAgIC8vIH0gY2F0Y2ggKGUpIHtcclxuICAgIC8vICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgIC8vIH0gZmluYWxseSB7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coYXJyYXkpO1xyXG4gICAgLy8gICAgIGFycmF5LnB1c2gocmVzRmlsZUlkKTtcclxuICAgIC8vICAgICBjb25zb2xlLmxvZyhhcnJheSk7XHJcbiAgICAvLyAgICAgZWxlLnZhbHVlID0gYXJyYXkuam9pbignLCcpKS50cmlnZ2VyKCdpbnB1dCc7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gZWxlLnZhbChlbGUudmFsKCkuc3BsaXQoJywnKS5wdXNoKHJlc0lkKS5qb2luKCcsJykpLnRyaWdnZXIoJ2lucHV0Jyk7XHJcblxyXG4gICAgLy8gJCh0aGlzKS5zaWJsaW5ncygnLmhpZGRlbicpLnZhbCh1cGxvYWRGaWxlcyhldmVudC50YXJnZXQuZmlsZXMpKS50cmlnZ2VyKCdpbnB1dCcpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSBmaWxlcyB1cGxvYWRpbmcgZmlsZXNcclxuICogQHBhcmFtIGVsZSBlbGVtZW50IHRoYXQgbmVlZCB0byByZWNlaXZlIHJlc3BvbnNlIElEXHJcbiAqIEBkZXNjIEZpbGVzIHVwbG9hZCBtb2R1bGUgZm9yIHRlc3QuIFdoZW4gcmVjZWl2ZWQgaWQsIHVzaW5nIFwidHJpZ2dlcignaW5wdXQnKVwiIG1ha2UgbmctbW9kZWwga25vd1xyXG4gKi9cclxuZnVuY3Rpb24gdXBsb2FkRmlsZXMoZmlsZXMsIGVsZSkge1xyXG4gICAgLy8gQ3JlYXRlIGEgZm9ybWRhdGEgb2JqZWN0IGFuZCBhZGQgdGhlIGZpbGVzXHJcbiAgICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAkLmVhY2goZmlsZXMsIChrZXksIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgZGF0YS5hcHBlbmQoXCJmaWxlc1wiLCB2YWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhmaWxlcylcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJ3VwbG9hZC5kbycsXHJcbiAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgICAgY2FjaGU6IGZhbHNlLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLCAvLyBEb24ndCBwcm9jZXNzIHRoZSBmaWxlc1xyXG4gICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSwgLy8gU2V0IGNvbnRlbnQgdHlwZSB0byBmYWxzZSBhcyBqUXVlcnkgd2lsbCB0ZWxsIHRoZSBzZXJ2ZXIgaXRzIGEgcXVlcnkgc3RyaW5nIHJlcXVlc3RcclxuICAgICAgICBzdWNjZXNzKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YS5lcnJvciA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIC8vIFN1Y2Nlc3Mgc28gY2FsbCBmdW5jdGlvbiB0byBwcm9jZXNzIHRoZSBmb3JtXHJcbiAgICAgICAgICAgICAgICBmaWxlaWQgPSBkYXRhLmNvbnRlbnQubmFtZTtcclxuICAgICAgICAgICAgICAgIGVsZS52YWx1ZSA9IGRhdGEuY29udGVudC5uYW1lO1xyXG4gICAgICAgICAgICAgICAgJChlbGUpLnRyaWdnZXIoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAvLyBzdWJtaXRGb3JtKGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBlcnJvcnMgaGVyZVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEVSUk9SUzogJHtkYXRhLmVycm9yfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuICAgICAgICAgICAgLy8gSGFuZGxlIGVycm9ycyBoZXJlXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFUlJPUlM6ICR7dGV4dFN0YXR1c31gKTtcclxuICAgICAgICAgICAgLy8gU1RPUCBMT0FESU5HIFNQSU5ORVJcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb21wb25lbnRzJylcclxuICAgICAgICAuZmFjdG9yeSgnY2xpZW50T3JkZXInLCBjbGllbnRPcmRlcik7XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBjbGllbnRPcmRlci4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBjbGllbnRPcmRlcigkcmVzb3VyY2UpIHtcclxuICAgICAgICByZXR1cm4gJHJlc291cmNlKCd3cy9jbGllbnRvcmRlci9saXN0Jywge30sIHtcclxuICAgICAgICAgICAgcXVlcnk6IHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgaXNBcnJheTogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvbXBvbmVudHMnKVxyXG4gICAgICAgIC5mYWN0b3J5KCdtYXJrZXRPcmRlcicsIG1hcmtldE9yZGVyKTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIG1hcmtldE9yZGVyLiRpbmplY3QgPSBbJyRyZXNvdXJjZSddO1xyXG5cclxuICAgIGZ1bmN0aW9uIG1hcmtldE9yZGVyKCRyZXNvdXJjZSkge1xyXG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoJ3dzL21hcmtldG9yZGVyL2xpc3QvOmNvSWQnLCB7IGNvSWQ6ICdAY29JZCcgfSk7XHJcbiAgICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvbXBvbmVudHMnKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdmaWxlVXBsb2FkJywgZmlsZVVwbG9hZCk7XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmaWxlVXBsb2FkLiRpbmplY3QgPSBbJyRodHRwJ107XHJcblxyXG4gICAgZnVuY3Rpb24gZmlsZVVwbG9hZCgkaHR0cCkge1xyXG4gICAgICAgIHRoaXMudXBsb2FkRmlsZVRvVXJsID0gZnVuY3Rpb24gKGZpbGUsIHVwbG9hZFVybCkge1xyXG4gICAgICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICAgICAgZmQuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QodXBsb2FkVXJsLCBmZCwge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eSxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZCB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29tcG9uZW50cycpXHJcbiAgICAgICAgLmZhY3RvcnkoJ0xvZ2luJywgTG9naW4pO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgTG9naW4uJGluamVjdCA9IFsnJHJlc291cmNlJ107XHJcblxyXG4gICAgZnVuY3Rpb24gTG9naW4oJHJlc291cmNlKSB7XHJcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZSgnd3MvbG9naW4nLCB7fSwge1xyXG4gICAgICAgICAgICBsb2dpbjoge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgaXNBcnJheTogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb21wb25lbnRzJylcclxuICAgICAgICAuZmFjdG9yeSgnbWFya2V0T3JkZXInLCBtYXJrZXRPcmRlcik7XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBtYXJrZXRPcmRlci4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBtYXJrZXRPcmRlcigkcmVzb3VyY2UpIHtcclxuICAgICAgICByZXR1cm4gJHJlc291cmNlKCd3cy9tYXJrZXRvcmRlci9saXN0Lzpjb0lkJywgeyBjb0lkOiAnQGNvSWQnIH0pO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQGF1dGhvciBTaGF3blxyXG4gKiBAZGVzYyBtYWluQVBQXHJcbiAqL1xyXG4oKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb3JlJylcclxuICAgICAgICAvLyBHbG9iYWxcclxuICAgICAgICAuY29uc3RhbnQoJ1dFQl9JTkZPJywge1xyXG4gICAgICAgICAgICB0aXRsZTogJ09yZGVyIE1hbmFnZW1lbnQgU3lzdGVtJ1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC5jb25zdGFudCgnQVVUSF9FVkVOVFMnLCB7XHJcbiAgICAgICAgICAgIGxvZ2luU3VjY2VzczogJ2F1dGgtbG9naW4tc3VjY2VzcycsXHJcbiAgICAgICAgICAgIGxvZ2luRmFpbGVkOiAnYXV0aC1sb2dpbi1mYWlsZWQnLFxyXG4gICAgICAgICAgICBsb2dvdXRTdWNjZXNzOiAnYXV0aC1sb2dvdXQtc3VjY2VzcycsXHJcbiAgICAgICAgICAgIHNlc3Npb25UaW1lb3V0OiAnYXV0aC1zZXNzaW9uLXRpbWVvdXQnLFxyXG4gICAgICAgICAgICBub3RBdXRoZW50aWNhdGVkOiAnYXV0aC1ub3QtYXV0aGVudGljYXRlZCcsXHJcbiAgICAgICAgICAgIHBhZ2VOb3RGb3VuZDogJ3BhZ2Utbm90LWZvdW5kJyxcclxuICAgICAgICAgICAgc2VydmVyRXJyb3I6ICdzZXJ2ZXItZXJyb3InXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gRG8gYXV0aCB3aGVuIHN0YXRlL3VybCBjaGFuZ2VcclxuICAgICAgICAucnVuKCgkcm9vdFNjb3BlLCBBVVRIX0VWRU5UUywgQXV0aFNlcnZpY2UpID0+IHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgKGV2ZW50LCBuZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KEFVVEhfRVZFTlRTLm5vdEF1dGhlbnRpY2F0ZWQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyID0gQXV0aFNlcnZpY2UuZ2V0VXNlcm5hbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIEBhdXRob3IgU2hhd25cclxuICogQGRlc2MgVGhlIFJvb3QgQ29udHJvbGxlciBvZiB0aGUgbWFpbkFQUFxyXG4gKi9cclxuKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29yZScpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ21haW5DdHJsJywgbWFpbkN0cmwpO1xyXG5cclxuICAgIG1haW5DdHJsLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRsb2NhdGlvbicsICckc3RhdGUnLCAnJHdpbmRvdycsICdBdXRoU2VydmljZScsICdBVVRIX0VWRU5UUycsICdDb21tb25TZXJ2aWNlJ107XHJcblxyXG4gICAgZnVuY3Rpb24gbWFpbkN0cmwoXHJcbiAgICAgICAgJHJvb3RTY29wZSxcclxuICAgICAgICAkc2NvcGUsXHJcbiAgICAgICAgJGxvY2F0aW9uLFxyXG4gICAgICAgICRzdGF0ZSxcclxuICAgICAgICAkd2luZG93LFxyXG4gICAgICAgIEF1dGhTZXJ2aWNlLFxyXG4gICAgICAgIEFVVEhfRVZFTlRTLFxyXG4gICAgICAgIENvbW1vblNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgaWYgKCFBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xyXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHJvb3RTY29wZS5zZXRDdXJyZW50VXNlciA9IHVzZXIgPT4ge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBMb2cgb3V0XHJcbiAgICAgICAgJHNjb3BlLmxvZ291dCA9ICgpID0+IHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlciA9IG51bGw7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChBVVRIX0VWRU5UUy5sb2dvdXRTdWNjZXNzKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvZ291dCBzdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIC8vIEF1dGhTZXJ2aWNlLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoQ29tbW9uU2VydmljZS5pc1JlcVN1Y2Nlc3MocmVzKSkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChBVVRIX0VWRU5UUy5sb2dvdXRTdWNjZXNzKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygnTG9nIG91dCBzdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIENvbW1vblNlcnZpY2UuaGFuZGxlUmVzRXJyKHJlcyk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH0sIGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgICAgICAvLyAgICAgQ29tbW9uU2VydmljZS5oYW5kbGVIdHRwRXJyKHJlcyk7XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTGlzdGVuaW5nXHJcbiAgICAgICAgJHNjb3BlLiRvbihBVVRIX0VWRU5UUy5sb2dpblN1Y2Nlc3MsIChldmVudCwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImxvZ2luIHN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkLm9yZGVyJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oQVVUSF9FVkVOVFMubG9naW5GYWlsZWQsIChldmVudCwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5kZXN0b3J5KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibG9naW4gZmFpbGVkXCIpO1xyXG4gICAgICAgICAgICAvLyAkbG9jYXRpb24ucGF0aCgnLycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKEFVVEhfRVZFTlRTLmxvZ291dFN1Y2Nlc3MsIChldmVudCwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBBdXRoU2VydmljZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibG9naW4gZmFpbGVkXCIpO1xyXG4gICAgICAgICAgICAvLyAkbG9jYXRpb24ucGF0aCgnLycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdtZXRob2Qtbm90LWFsbG93JywgKGV2ZW50LCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibWV0aG9kIG5vdCBhbGxvd1wiKTtcclxuICAgICAgICAgICAgLy8gJGxvY2F0aW9uLnBhdGgoJy8nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbihBVVRIX0VWRU5UUy5wYWdlTm90Rm91bmQsIChldmVudCwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnNDA0IGVycm9yJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oQVVUSF9FVkVOVFMuc2VydmVyRXJyb3IsIChldmVudCwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnNTAwIGVycm9yJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge30pKCk7XHJcbiIsIi8qKlxyXG4gKiBAYXV0aG9yIFNoYXduXHJcbiAqIEBkZXNjIG1haW5BUFBcclxuICovXHJcbigoKSA9PiB7XHJcbiAgICBjb25zdCBQUk9KRUNUU1RBVFVTID0ge1xyXG4gICAgICAgIDA6IFwidGVcIixcclxuICAgICAgICAxOiBcIjJcIixcclxuICAgICAgICAyOiBcIjNcIixcclxuICAgICAgICAzOiBcInJcIixcclxuICAgICAgICA0OiBcInJcIixcclxuICAgICAgICA1OiBcImZld2ZcIixcclxuICAgICAgICA2OiBcImZlYXdcIlxyXG4gICAgfTtcclxuXHJcbiAgICAvKiBmaWx0ZXJzICovXHJcbiAgICBjb25zdCBmaWx0ZXJzID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5jb3JlJylcclxuXHJcbiAgICAuZmlsdGVyKCdzd2l0Y2gnLCAoKSA9PiBwYXJhbSA9PiB7XHJcbiAgICAgICAgaWYgKHBhcmFtID09IDEgfHwgcGFyYW0gPT0gJzEnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnT1BFTic7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICdDTE9TRUQnO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gNzggPT09PiAwLjc4XHJcbiAgICAuZmlsdGVyKCdwZXJjZW50JywgKCkgPT4gcGFyYW0gPT4ge1xyXG4gICAgICAgIGlmIChwYXJhbSAhPSB1bmRlZmluZWQgJiYgaXNOYU4ocGFyYW0pID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJhbSAqIDEwMDAgLyAxMDAwMDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLmZpbHRlcignY2F0ZWdvcnknLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gQ0FURUdPUlk7XHJcbiAgICAgICAgcmV0dXJuIHBhcmFtID0+IG9ialtwYXJhbV0gIT0gdW5kZWZpbmVkID8gb2JqW3BhcmFtXSA6IFwiXCJcclxuICAgIH0pXHJcblxyXG4gICAgLmZpbHRlcignYnVpbGRjb21wYW55JywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IEJVSUxEQ09NUEFOWTtcclxuICAgICAgICByZXR1cm4gcGFyYW0gPT4gb2JqW3BhcmFtXSAhPSB1bmRlZmluZWQgPyBvYmpbcGFyYW1dIDogXCJcIlxyXG4gICAgfSlcclxuXHJcbiAgICAuZmlsdGVyKCdwcm9qZWN0c3RhdHVzJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IFBST0pFQ1RTVEFUVVM7XHJcbiAgICAgICAgcmV0dXJuIHBhcmFtID0+IG9ialtwYXJhbV0gIT0gdW5kZWZpbmVkID8gb2JqW3BhcmFtXSA6IFwiXCJcclxuICAgIH0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBAYXV0aG9yIFNoYXduXHJcbiAqIEBkZXNjIHJvdXRlciBvZiBhcHAuY29yZVxyXG4gKi9cclxuKCgpID0+IHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29yZScpXHJcblxyXG4gICAgICAgIC5jb25maWcoXHJcbiAgICAgICAgKCRzdGF0ZVByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAvLyBJbnRlcmNlcHRvciBvZiBSZXF1ZXN0c1xyXG4gICAgICAgICAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKFtcclxuICAgICAgICAgICAgICAgICckaW5qZWN0b3InLFxyXG4gICAgICAgICAgICAgICAgJGluamVjdG9yID0+ICRpbmplY3Rvci5nZXQoJ0F1dGhJbnRlcmNlcHRvcicpXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZUJhc2U6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gRm9yIGFueSB1bm1hdGNoZWQgdXJsLCByZWRpcmVjdCB0byAvXHJcbiAgICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9sb2dpbicpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIGxvZ2lucmVnaXN0ZXJcclxuICAgICAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBtYWluIHBhZ2VcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnZGFzaGJvYXJkJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnaHRtbC9kYXNoYm9hcmQuaHRtbCdcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKFwiZGFzaGJvYXJkLm9yZGVyXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwib3JkZXJcIixcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJqcy9jb21wb25lbnRzL2NsaWVudC1vcmRlci1saXN0L2NsaWVudC1vcmRlci1saXN0Lmh0bWxcIlxyXG4gICAgICAgICAgICAgICAgfSkuc3RhdGUoXCJkYXNoYm9hcmQuYWRkQ2xpZW50T3JkZXJcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogXCJvcmRlcmFkZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImpzL2NvbXBvbmVudHMvY2xpZW50LW9yZGVyLWFkZC9jbGllbnQtb3JkZXItYWRkLmh0bWxcIlxyXG4gICAgICAgICAgICAgICAgfSkuc3RhdGUoXCJkYXNoYm9hcmQuZGVtb1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcImRlbW9cIixcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJodG1sL2RlbW8uaHRtbFwiXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnbG9naW4nLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2xvZ2luJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2h0bWwvbG9naW4uaHRtbCdcclxuICAgICAgICAgICAgICAgIH0pLnN0YXRlKCdyZWdpc3RlcicsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvcmVnaXN0ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnaHRtbC9yZWdpc3Rlci5odG1sJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVc2VyIEFjY291bnRcclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYWNjb3VudCcsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYWNjb3VudCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdodG1sL2FjY291bnQvYWNjb3VudC5odG1sJ1xyXG4gICAgICAgICAgICAgICAgfSkuc3RhdGUoJ2FjY291bnQubWUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL21lJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2h0bWwvYWNjb3VudC9hY2NvdW50Lm1lLmh0bWwnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGZvciB0ZXN0XHJcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ3Rlc3QnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3Rlc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnaHRtbC90ZXN0LWFuZ3VsYXItdWktYm9vdHN0cmFwLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd0ZXN0Q3RybCdcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbn0pKCk7XHJcbiIsIi8qKlxyXG4gKiBAYXV0aG9yIFNoYXduXHJcbiAqIEBkZXNjIFNlcnZpY2VzIG9mIHRoZSBtYWluQVBQXHJcbiAqL1xyXG5cclxuLy8gRm9yIHRlc3RcclxuY29uc3QgY29tbW9uVGVzdCA9IHRydWU7XHJcblxyXG4oKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb3JlJylcclxuICAgICAgICAuZmFjdG9yeSgnQXV0aEludGVyY2VwdG9yJywgQXV0aEludGVyY2VwdG9yKVxyXG4gICAgICAgIC5mYWN0b3J5KCdDb21tb25TZXJ2aWNlJywgQ29tbW9uU2VydmljZSlcclxuICAgICAgICAuZmFjdG9yeSgnQXV0aFNlcnZpY2UnLCBBdXRoU2VydmljZSlcclxuICAgICAgICAuZmFjdG9yeSgncmVnaXN0ZXJTZXJ2aWNlJywgcmVnaXN0ZXJTZXJ2aWNlKVxyXG4gICAgICAgIC5mYWN0b3J5KCd1c2VyU2VydmljZScsIHVzZXJTZXJ2aWNlKTtcclxuXHJcbiAgICBBdXRoSW50ZXJjZXB0b3IuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckcScsICckd2luZG93JywgJ0FVVEhfRVZFTlRTJ107XHJcbiAgICBBdXRoU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckcm9vdFNjb3BlJywgJ0FVVEhfRVZFTlRTJywgJyR3aW5kb3cnLCAnQ29tbW9uU2VydmljZSddO1xyXG4gICAgQ29tbW9uU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCddO1xyXG4gICAgcmVnaXN0ZXJTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRyb290U2NvcGUnLCAnQ29tbW9uU2VydmljZSddO1xyXG4gICAgdXNlclNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJHJvb3RTY29wZScsICdDb21tb25TZXJ2aWNlJ107XHJcblxyXG5cclxuICAgIC8vIEludGVyY2VwdG9yXHJcbiAgICBmdW5jdGlvbiBBdXRoSW50ZXJjZXB0b3IoJHJvb3RTY29wZSwgJHEsICR3aW5kb3csIEFVVEhfRVZFTlRTKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZSA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdDogcmVxdWVzdEhhbmRsZXIsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlOiByZXNwb25zZUhhbmRsZXIsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlRXJyb3I6IHJlc3BvbnNlRXJyb3JIYW5kbGVyXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVxdWVzdEhhbmRsZXIoY29uZmlnKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XHJcbiAgICAgICAgICAgIGlmICgkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbikge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnNbJ1gtQXV0aFRva2VuJ10gPSAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKVxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSB8fCAkcS53aGVuKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc3BvbnNlRXJyb3JIYW5kbGVyKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KHtcclxuICAgICAgICAgICAgICAgIDQwMTogQVVUSF9FVkVOVFMubm90QXV0aGVudGljYXRlZCxcclxuICAgICAgICAgICAgICAgIDQwMzogQVVUSF9FVkVOVFMubm90QXV0aG9yaXplZCxcclxuICAgICAgICAgICAgICAgIDQwNTogJ21ldGhvZC1ub3QtYWxsb3cnLFxyXG4gICAgICAgICAgICAgICAgNDE5OiBBVVRIX0VWRU5UUy5zZXNzaW9uVGltZW91dCxcclxuICAgICAgICAgICAgICAgIDQ0MDogQVVUSF9FVkVOVFMuc2Vzc2lvblRpbWVvdXQsXHJcbiAgICAgICAgICAgICAgICA0MDQ6IEFVVEhfRVZFTlRTLnBhZ2VOb3RGb3VuZCxcclxuICAgICAgICAgICAgICAgIDUwMDogQVVUSF9FVkVOVFMuc2VydmVyRXJyb3JcclxuICAgICAgICAgICAgfVtyZXNwb25zZS5zdGF0dXNdLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBBdXRoU2VydmljZSgkaHR0cCwgJHJvb3RTY29wZSwgQVVUSF9FVkVOVFMsICR3aW5kb3csIENvbW1vblNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VydmljZSA9IHt9O1xyXG5cclxuICAgICAgICBsZXQgc3RvcmFnZVRva2VuVGl0bGUgPSAndG9rZW4nLFxyXG4gICAgICAgICAgICBzdG9yYWdlVXNlclRpdGxlID0gJ3VzZXJuYW1lJyxcclxuICAgICAgICAgICAgbHMgPSAkd2luZG93LmxvY2FsU3RvcmFnZTtcclxuXHJcbiAgICAgICAgLy8gZm9ybiB1c2VyIGluZm9tYXRpb24gKGluY2x1ZGUgdG9rZW4pXHJcbiAgICAgICAgc2VydmljZS5jcmVhdGVVc2VySW5mbyA9ICh1c2VybmFtZSwgdG9rZW4pID0+IHtcclxuICAgICAgICAgICAgbHMuc2V0SXRlbShzdG9yYWdlVXNlclRpdGxlLCB1c2VybmFtZSk7XHJcbiAgICAgICAgICAgIGxzLnNldEl0ZW0oc3RvcmFnZVRva2VuVGl0bGUsIHRva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VydmljZS5kZXN0cm95ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBscy5yZW1vdmVJdGVtKHN0b3JhZ2VVc2VyVGl0bGUpO1xyXG4gICAgICAgICAgICBscy5yZW1vdmVJdGVtKHN0b3JhZ2VUb2tlblRpdGxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG9ubHkgZm9yIFRva2VuXHJcbiAgICAgICAgc2VydmljZS5jcmVhdGVUb2tlbiA9ICh0b2tlbikgPT4ge1xyXG4gICAgICAgICAgICBscy5zZXRJdGVtKHN0b3JhZ2VUb2tlblRpdGxlLCB0b2tlbik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VydmljZS5nZXRUb2tlbiA9ICgpID0+IGxzLmdldEl0ZW0oc3RvcmFnZVRva2VuVGl0bGUpO1xyXG5cclxuICAgICAgICBzZXJ2aWNlLnJlbW92ZVRva2VuID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBscy5yZW1vdmVJdGVtKHN0b3JhZ2VUb2tlblRpdGxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG9ubHkgZm9yIHVzZXJuYW1lXHJcbiAgICAgICAgc2VydmljZS5nZXRVc2VybmFtZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgbHMuZ2V0SXRlbShzdG9yYWdlVXNlclRpdGxlKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNlcnZpY2UubG9naW4gPSB1c2VyID0+IENvbW1vblNlcnZpY2UucG9zdChcImxvZ2luXCIsIHVzZXIpO1xyXG5cclxuICAgICAgICBzZXJ2aWNlLmxvZ291dCA9ICgpID0+IENvbW1vblNlcnZpY2UucG9zdChcImxvZ291dFwiKTtcclxuXHJcbiAgICAgICAgLy8gaXMgc2Vzc2lvbiBhdmFsaWRcclxuICAgICAgICBzZXJ2aWNlLmlzQXV0aGVudGljYXRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYGlzQXV0aGVudGljYXRlZDogJHshIWxzLnRva2VufWApO1xyXG4gICAgICAgICAgICByZXR1cm4gISFscy50b2tlbjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlKCRodHRwLCAkcm9vdFNjb3BlLCBDb21tb25TZXJ2aWNlKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZSA9IHt9O1xyXG5cclxuICAgICAgICBzZXJ2aWNlLnJlZ2lzdGVyID0gdXNlciA9PiBDb21tb25TZXJ2aWNlLnBvc3QoXCJyZWdpc3RlclwiLCB1c2VyKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXNlclNlcnZpY2UoJGh0dHAsICRyb290U2NvcGUsIENvbW1vblNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlID0ge307XHJcblxyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBHbG9iYWwgU2VydmljZXNcclxuICAgIGZ1bmN0aW9uIENvbW1vblNlcnZpY2UoJGh0dHApIHtcclxuICAgICAgICAvLyBTZXQgQ29udGVudC1UeXBlIHRvIGZvcm0tZGF0YSB3aGljaCBiYWNrLWVuZCBjYW4gYWNjZXB0XHJcbiAgICAgICAgLy8gJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCc7XHJcblxyXG4gICAgICAgIGNvbnN0IHVybEJhY2tFbmQgPSAnaHR0cDovL2xvZmV3ZmNhbGhvc3Q6ODA4MC93cy8nO1xyXG4gICAgICAgIC8vIHZhciB1cmxCYWNrRW5kID0gJ2h0dHA6Ly8xMC4yMi4xNi4xMjQ6ODA4OC93cy9tYXJrZXRvcmRlci9nZXRCeUNsaWVudE9yZGVySWQvJztcclxuICAgICAgICBjb25zdCB1cmxNaWRkbGVFbmQgPSAnaHR0cHM6Ly9FeGFtcGxlVVJMLjkyLyc7XHJcblxyXG4gICAgICAgIC8vIHJlcXVlc3RzIHN0YXR1cyBoYW5kbGVcclxuICAgICAgICB0aGlzLmlzUmVxU3VjY2VzcyA9IHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuZGF0YS5lcnJDb2RlID09IDAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gaGFuZGxlIEh0dHAgZXJyb3JcclxuICAgICAgICB0aGlzLmhhbmRsZUh0dHBFcnIgPSByZXMgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVxIEVycm9yJywgcmVzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBoYW5kbGUgcmVzcG9uc2UgZXJyb3IgKGJhc2Ugb24gQVBJKVxyXG4gICAgICAgIHRoaXMuaGFuZGxlUmVzRXJyID0gcmVzID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmVyckRlc2MgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2l0aG91dCBkaXNjcmlwdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYG1zZzogJHtyZXMuZXJyRGVzY31gKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KHJlcy5kYXRhLmVyckRlc2MpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gcG9zdCBzaW5nbGUgY29tbWFuZCB0byBiYWNrLWVuZCBzZXJ2ZXJcclxuICAgICAgICB0aGlzLnBvc3QgPSAoY29tbWFuZCwgZGF0YSkgPT4gY29tbW9uVGVzdCA/ICRodHRwKHtcclxuICAgICAgICAgICAgdXJsOiBgdGVzdC1kYXRhL3dzLyR7Y29tbWFuZH1gLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICAgICAgfSkgOiAkaHR0cCh7XHJcbiAgICAgICAgICAgIHVybDogdXJsQmFja0VuZCArIGNvbW1hbmQsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHBvc3QgbXVsdGkgY29tbWFuZHMgdG8gc2VydmVyXHJcbiAgICAgICAgdGhpcy5wb3N0TXVsdGkgPSAoKSA9PiB7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb21wb25lbnRzJylcclxuICAgICAgICAuY29udHJvbGxlcignY2xpZW50T3JkZXJBZGRDdHJsJywgY2xpZW50T3JkZXJBZGRDdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjbGllbnRPcmRlckFkZEN0cmwoJHNjb3BlLCAkd2luZG93KSB7XHJcblxyXG5cclxuICAgIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29tcG9uZW50cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2NsaWVudE9yZGVyQnV5Q3RybCcsIGNsaWVudE9yZGVyQnV5Q3RybCk7XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBjbGllbnRPcmRlckJ1eUN0cmwuJGluamVjdCA9IFsnJHNjb3BlJ107XHJcblxyXG4gICAgZnVuY3Rpb24gY2xpZW50T3JkZXJCdXlDdHJsKCRzY29wZSkge1xyXG4gICAgICAgICRzY29wZS5zdG9ja0luZm8gPSBbeyB1dWlkOiBcIl9BQkNcIiwgcmljOiBcIlwiLCBuYW1lOiBcIlwiIH0sXHJcbiAgICAgICAgICAgIHsgdXVpZDogXCJfQUJDXCIsIHJpYzogXCJcIiwgbmFtZTogXCJcIiB9LFxyXG4gICAgICAgICAgICB7IHV1aWQ6IFwiX0FCQ1wiLCByaWM6IFwiXCIsIG5hbWU6IFwiXCIgfV1cclxuICAgIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29tcG9uZW50cycpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnY2xpZW50T3JkZXJCdXknLCBjbGllbnRPcmRlckJ1eSk7XHJcblxyXG4gICAgZnVuY3Rpb24gY2xpZW50T3JkZXJCdXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGljb246IFwiQFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvY29tcG9uZW50cy9jbGllbnQtb3JkZXItYWRkL2NsaWVudC1vcmRlci1idXkuaHRtbCcsXHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiBcIkVcIlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvbXBvbmVudHMnKVxyXG4gICAgICAgIC5mYWN0b3J5KCdjbGllbnRPcmRlcicsIGNsaWVudE9yZGVyKTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGNsaWVudE9yZGVyLiRpbmplY3QgPSBbJyRyZXNvdXJjZSddO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNsaWVudE9yZGVyKCRyZXNvdXJjZSkge1xyXG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoJ3dzL2NsaWVudG9yZGVyL2xpc3QnLCB7fSwge1xyXG4gICAgICAgICAgICBxdWVyeToge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgIHBhcmFtczoge30sXHJcbiAgICAgICAgICAgICAgICBpc0FycmF5OiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29tcG9uZW50cycpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnY2xpZW50T3JkZXJTZWxsJywgY2xpZW50T3JkZXJTZWxsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjbGllbnRPcmRlclNlbGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGljb246IFwiQFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnanMvY29tcG9uZW50cy9jbGllbnQtb3JkZXItYWRkL2NsaWVudC1vcmRlci1zZWxsLmh0bWwnLFxyXG4gICAgICAgICAgICByZXN0cmljdDogXCJFXCJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb21wb25lbnRzJylcclxuICAgICAgICAuY29udHJvbGxlcignY2xpZW50T3JkZXJVcGxvYWRDdHJsJywgY2xpZW50T3JkZXJVcGxvYWRDdHJsKTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGNsaWVudE9yZGVyVXBsb2FkQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnZmlsZVVwbG9hZCddO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNsaWVudE9yZGVyVXBsb2FkQ3RybCgkc2NvcGUsIGZpbGVVcGxvYWQpIHtcclxuXHJcbiAgICAgICAgJHNjb3BlLnVwbG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIGZpbGUgPSAkc2NvcGUubXlGaWxlO1xyXG4gICAgICAgICAgICB2YXIgdXBsb2FkVXJsID0gJ3dzL2ZpbGUvdXBsb2FkJztcclxuICAgICAgICAgICAgZmlsZVVwbG9hZC51cGxvYWRGaWxlVG9VcmwoZmlsZSwgdXBsb2FkVXJsKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb21wb25lbnRzJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdjbGllbnRPcmRlclVwbG9hZCcsIGNsaWVudE9yZGVyVXBsb2FkKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjbGllbnRPcmRlclVwbG9hZCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgaWNvbjogXCJAXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9jb21wb25lbnRzL2NsaWVudC1vcmRlci1hZGQvY2xpZW50LW9yZGVyLXVwbG9hZC5odG1sJyxcclxuICAgICAgICAgICAgcmVzdHJpY3Q6IFwiRVwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29tcG9uZW50cycpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnZmlsZU1vZGVsJywgZmlsZU1vZGVsKTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZpbGVNb2RlbC4kaW5qZWN0ID0gWyckcGFyc2UnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBmaWxlTW9kZWwoJHBhcnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gJHBhcnNlKGF0dHJzLmZpbGVNb2RlbCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWxTZXR0ZXIgPSBtb2RlbC5hc3NpZ247XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5iaW5kKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0ZXIoc2NvcGUsIGVsZW1lbnRbMF0uZmlsZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29tcG9uZW50cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0NvTGlzdEN0cmwnLCBDb0xpc3RDdHJsKTtcclxuXHJcbiAgICBDb0xpc3RDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckcm9vdFNjb3BlJywgJ2NsaWVudE9yZGVyJywgJ21hcmtldE9yZGVyJywgJ21vJ107XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBDb0xpc3RDdHJsKCRzY29wZSwgJHJvb3RTY29wZSwgY2xpZW50T3JkZXIsIG1hcmtldE9yZGVyLCBtbykge1xyXG5cclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDbGllbnRPcmRlcklkID0gXCJcIjtcclxuICAgICAgICAvLyAkc2NvcGUubWFya2V0T3JkZXJMaXN0ID0gW107XHJcbiAgICAgICAgJHNjb3BlLnNob3dNYXJrZXRPcmRlckxpc3QgPSBpZCA9PiB7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc2VsZWN0ZWRDbGllbnRPcmRlcklkICE9IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDbGllbnRPcmRlcklkID0gaWQ7XHJcbiAgICAgICAgICAgICAgICBxdWVyeU1hcmtldE9yZGVyTGlzdChpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS5jbG9zZU1hcmtldE9yZGVyTGlzdCA9ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gJHNjb3BlLmNsb3NlID0gISRzY29wZS5jbG9zZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnNlbGVjdGVkQ2xpZW50T3JkZXJJZCk7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZENsaWVudE9yZGVySWQgPSBcIlwiO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuc2VsZWN0ZWRDbGllbnRPcmRlcklkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGluaXRcclxuICAgICAgICBjbGllbnRPcmRlci5xdWVyeSh7fSwgcmVzID0+IHtcclxuICAgICAgICAgICAgJHNjb3BlLmNsaWVudE9yZGVySXRlbXMgPSByZXM7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAvLyAkaW50ZXJ2YWwocXVlcnlNYXJrZXRPcmRlckxpc3QsIDEwMDApO1xyXG5cclxuICAgICAgICBjb25zdCBxdWVyeU1hcmtldE9yZGVyTGlzdCA9IChpZCkgPT4ge1xyXG4gICAgICAgICAgICBtYXJrZXRPcmRlci5xdWVyeSh7IGNvSWQ6IGlkIH0sIHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBtby5zZXQocmVzKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdtYXJrZXQtb3JkZS1oYXZlLWJlZW4tc2V0Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb21wb25lbnRzJylcclxuICAgICAgICAuY29udHJvbGxlcignY29QaWVDdHJsJywgY29QaWVDdHJsKTtcclxuXHJcbiAgICBjb1BpZUN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJyRodHRwJywgJyR3aW5kb3cnLCAnJGNvb2tpZXMnLCAnJHN0YXRlJywgJyRpbnRlcnZhbCcsICdBVVRIX0VWRU5UUycsICdDb21tb25TZXJ2aWNlJywgJ0F1dGhTZXJ2aWNlJywgJ21hcmtldE9yZGVyJ107XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBjb1BpZUN0cmwoXHJcbiAgICAgICAgJHNjb3BlLFxyXG4gICAgICAgICRyb290U2NvcGUsXHJcbiAgICAgICAgJGxvY2F0aW9uLFxyXG4gICAgICAgICRodHRwLFxyXG4gICAgICAgICR3aW5kb3csXHJcbiAgICAgICAgJGNvb2tpZXMsXHJcbiAgICAgICAgJHN0YXRlLFxyXG4gICAgICAgICRpbnRlcnZhbCxcclxuICAgICAgICBBVVRIX0VWRU5UUyxcclxuICAgICAgICBDb21tb25TZXJ2aWNlLFxyXG4gICAgICAgIEF1dGhTZXJ2aWNlLFxyXG4gICAgICAgIG1hcmtldE9yZGVyKSB7XHJcblxyXG5cclxuICAgICAgICBjb25zdCBvcHRpb24gPSB7XHJcbiAgICAgICAgICAgIHRpdGxlOiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnTWFya2V0IE9yZGVyIFBpZScsXHJcbiAgICAgICAgICAgICAgICBzdWJ0ZXh0OiAnJyxcclxuICAgICAgICAgICAgICAgIHg6ICdjZW50ZXInXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdpdGVtJyxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogXCJ7YX0gPGJyLz57Yn0gOiB7Y30gKHtkfSUpXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGVnZW5kOiB7XHJcbiAgICAgICAgICAgICAgICBvcmllbnQ6ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAnbGVmdCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBbJ05ZU0UnLCAnTkFTREFRJywgJ1NTRScsICdIS1NFJywgJ1NHU0UnXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXJpZXM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnRXhjaGFuZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwaWUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogJzU1JScsXHJcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyOiBbJzUwJScsICc2MCUnXSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6IDMzNSwgbmFtZTogJ05ZU0UnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6IDMxMCwgbmFtZTogJ05BU0RBUScgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogMjM0LCBuYW1lOiAnU1NFJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAxMzUsIG5hbWU6ICdIS1NFJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAxNTQ4LCBuYW1lOiAnU0dTRScgfVxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtcGhhc2lzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dCbHVyOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd09mZnNldFg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dDb2xvcjogJ3JnYmEoMCwgMCwgMCwgMC41KSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG15Q2hhcnQgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKSk7XHJcbiAgICAgICAgbXlDaGFydC5zZXRPcHRpb24ob3B0aW9uKTtcclxuXHJcbiAgICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvbXBvbmVudHMnKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ2NsaWVudE9yZGVyUGllJywgY2xpZW50T3JkZXJQaWUpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNsaWVudE9yZGVyUGllKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBpY29uOiBcIkBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2NvbXBvbmVudHMvY2xpZW50LW9yZGVyLXBpZS9jbGllbnQtb3JkZXItcGllLmh0bWwnLFxyXG4gICAgICAgICAgICByZXN0cmljdDogXCJFXCJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb21wb25lbnRzJylcclxuICAgICAgICAuY29udHJvbGxlcignTG9naW5DdHJsJywgTG9naW5DdHJsKTtcclxuXHJcbiAgICBMb2dpbkN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJyRodHRwJywgJyR3aW5kb3cnLCAnJGNvb2tpZXMnLCAnJHN0YXRlJywgJ0FVVEhfRVZFTlRTJywgJ0NvbW1vblNlcnZpY2UnLCAnQXV0aFNlcnZpY2UnLCAnTG9naW4nXTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIExvZ2luQ3RybChcclxuICAgICAgICAkc2NvcGUsXHJcbiAgICAgICAgJHJvb3RTY29wZSxcclxuICAgICAgICAkbG9jYXRpb24sXHJcbiAgICAgICAgJGh0dHAsXHJcbiAgICAgICAgJHdpbmRvdyxcclxuICAgICAgICAkY29va2llcyxcclxuICAgICAgICAkc3RhdGUsXHJcbiAgICAgICAgQVVUSF9FVkVOVFMsXHJcbiAgICAgICAgQ29tbW9uU2VydmljZSxcclxuICAgICAgICBBdXRoU2VydmljZSxcclxuICAgICAgICBMb2dpbikge1xyXG5cclxuICAgICAgICAvLyBUT0RPIGNoZWNrIGlmIHVzZXIgaXMgTG9naW5cclxuICAgICAgICBpZiAoQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KEFVVEhfRVZFTlRTLmxvZ2luU3VjY2Vzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgJHNjb3BlLnVzZXIgPSB7fTtcclxuXHJcbiAgICAgICAgLy8gJHNjb3BlLmFsZXJ0cyA9IFtdXHJcbiAgICAgICAgJHNjb3BlLkFsZXJ0cyA9IHtcclxuICAgICAgICAgICAgaXNTaG93OiBmYWxzZSxcclxuICAgICAgICAgICAgYWxlcnRzOiBbXSxcclxuICAgICAgICAgICAgYWRkKG1zZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Nob3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGVydHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRzLnB1c2gobXNnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xvc2UoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICRzY29wZS5sb2dpbiA9IHVzZXIgPT4ge1xyXG5cclxuICAgICAgICAgICAgTG9naW4ubG9naW4odXNlciwgcmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMudG9rZW4gIT0gdW5kZWZpbmVkICYmIHJlcy50b2tlbiAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmNyZWF0ZVVzZXJJbmZvKHVzZXIudXNlcm5hbWUsIHJlcy50b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlciA9IHVzZXIudXNlcm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KEFVVEhfRVZFTlRTLmxvZ2luU3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLkFsZXJ0cy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuQWxlcnRzLmFkZCh7IHR5cGU6IFwiZGFuZ2VyXCIsIG1zZzogJ0xvZ2luIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCByZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLkFsZXJ0cy5hZGQoeyB0eXBlOiBcImRhbmdlclwiLCBtc2c6IHJlcy5kYXRhLnJlYXNvbiB8fCBcIkxvZ2luIGZhaWxlZC5cIiB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb21wb25lbnRzJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdsb2dpblBhbmVsJywgbG9naW5QYW5lbCk7XHJcblxyXG4gICAgbG9naW5QYW5lbC4kaW5qZWN0ID0gWyckY29tcGlsZSddO1xyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBsb2dpblBhbmVsKCRjb21waWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgc2NvcGU6ICdAJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9jb21wb25lbnRzL2xvZ2luLXBhbmVsL2xvZ2luLXBhbmVsLmh0bWwnLFxyXG4gICAgICAgICAgICBsaW5rKHNjb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzY29wZS5uYW1lID0gXCJoZWxcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29tcG9uZW50cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ01vTGlzdEN0cmwnLCBNb0xpc3RDdHJsKTtcclxuXHJcbiAgICBNb0xpc3RDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckcm9vdFNjb3BlJywgJyRsb2NhdGlvbicsICckaHR0cCcsICckd2luZG93JywgJyRjb29raWVzJywgJyRzdGF0ZScsICckaW50ZXJ2YWwnLCAnQVVUSF9FVkVOVFMnLCAnQ29tbW9uU2VydmljZScsICdBdXRoU2VydmljZScsICdtYXJrZXRPcmRlcicsICdtbyddO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gTW9MaXN0Q3RybChcclxuICAgICAgICAkc2NvcGUsXHJcbiAgICAgICAgJHJvb3RTY29wZSxcclxuICAgICAgICAkbG9jYXRpb24sXHJcbiAgICAgICAgJGh0dHAsXHJcbiAgICAgICAgJHdpbmRvdyxcclxuICAgICAgICAkY29va2llcyxcclxuICAgICAgICAkc3RhdGUsXHJcbiAgICAgICAgJGludGVydmFsLFxyXG4gICAgICAgIEFVVEhfRVZFTlRTLFxyXG4gICAgICAgIENvbW1vblNlcnZpY2UsXHJcbiAgICAgICAgQXV0aFNlcnZpY2UsXHJcbiAgICAgICAgbWFya2V0T3JkZXIsXHJcbiAgICAgICAgbW8pIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBpbml0XHJcbiAgICAgICAgJHNjb3BlLm1hcmtldE9yZGVyTGlzdCA9IG1vLmdldCgpO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdtYXJrZXQtb3JkZS1oYXZlLWJlZW4tc2V0JywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm1hcmtldE9yZGVyTGlzdCA9IG1vLmdldCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS4kb24oJ21hcmtldC1vcmRlLWhhdmUtYmVlbi11cGRhdGVkJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm1hcmtldE9yZGVyTGlzdCA9IG1vLmdldCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb21wb25lbnRzJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdtYXJrZXRPcmRlckxpc3QnLCBtYXJrZXRPcmRlckxpc3QpO1xyXG5cclxuICAgIGZ1bmN0aW9uIG1hcmtldE9yZGVyTGlzdCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgaWNvbjogXCJAXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdqcy9jb21wb25lbnRzL21hcmtldC1vcmRlci1saXN0L21hcmtldC1vcmRlci1saXN0Lmh0bWwnLFxyXG4gICAgICAgICAgICByZXN0cmljdDogXCJFXCJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb21wb25lbnRzJylcclxuICAgICAgICAuZmFjdG9yeSgnbW8nLCBtbyk7XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBtby4kaW5qZWN0ID0gWyckcmVzb3VyY2UnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBtbygkcmVzb3VyY2UpIHtcclxuICAgICAgICB2YXIgc2VydmljZSA9IHt9O1xyXG5cclxuICAgICAgICBzZXJ2aWNlLm1hcmtldE9yZGVyTGlzdCA9IFtdO1xyXG5cclxuICAgICAgICBzZXJ2aWNlLmdldCA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFya2V0T3JkZXJMaXN0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNlcnZpY2Uuc2V0ID0gKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXRPcmRlckxpc3QgPSBkYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VydmljZS5ybSA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXRPcmRlckxpc3QgPSAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQGF1dGhvciBTaGF3blxyXG4gKiBAZGVzYyBDb250cm9sbGVycyBvZiB0aGUgbWFpbkFQUFxyXG4gKi9cclxuKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29tcG9uZW50cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ3Rlc3RDdHJsJywgdGVzdEN0cmwpO1xyXG5cclxuICAgIHRlc3RDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckcm9vdFNjb3BlJywgJyRsb2NhdGlvbicsICckaHR0cCcsICdBVVRIX0VWRU5UUycsICdBdXRoU2VydmljZSddO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0Q3RybCgkc2NvcGUsICRyb290U2NvcGUsICRsb2NhdGlvbiwgJGh0dHAsIEFVVEhfRVZFTlRTLCBBdXRoU2VydmljZSkge1xyXG4gICAgICAgICRzY29wZS5vYmogPSB7XHJcbiAgICAgICAgICAgIHVybDogXCJ1c2VyL2xvZ2luLmRvXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IFwiXCJcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS50ZXN0ID0gb2JqID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYWEgPSAoSlNPTi5wYXJzZShvYmouZGF0YSkpO1xyXG4gICAgICAgICAgICAkc2NvcGUucmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgbXNnOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDogXCJcIlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IG9iai51cmwsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IG9iai5tZXRob2QsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBzZXJpYWxpemVEYXRhKGFhKVxyXG4gICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5yZXN1bHQgPSBcIlJlcSBTdWNjZXNzXCI7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0ID0gcmVzO1xyXG4gICAgICAgICAgICB9LCByZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bHQgPSByZXM7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0LnJlc3VsdCA9IFwiUmVxIEZhaWxcIjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQGF1dGhvciBTaGF3blxyXG4gKiBAZGVzYyBDb250cm9sbGVycyBvZiB0aGUgbWFpbkFQUFxyXG4gKi9cclxuXHJcbigoKSA9PiB7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvbXBvbmVudHMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCd0ZXN0Q3RybCcsIHRlc3RDdHJsKTtcclxuXHJcbiAgICB0ZXN0Q3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJHJvb3RTY29wZScsICckbG9jYXRpb24nLCAnJGh0dHAnLCAnQVVUSF9FVkVOVFMnLCAnQXV0aFNlcnZpY2UnXTtcclxuXHJcbiAgICBmdW5jdGlvbiB0ZXN0Q3RybCgkc2NvcGUsICRyb290U2NvcGUsICRsb2NhdGlvbiwgJGh0dHAsIEFVVEhfRVZFTlRTLCBBdXRoU2VydmljZSkge1xyXG4gICAgICAgICRzY29wZS5vYmogPSB7XHJcbiAgICAgICAgICAgIHVybDogXCJ1c2VyL2xvZ2luLmRvXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IFwiXCJcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS50ZXN0ID0gb2JqID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYWEgPSAoSlNPTi5wYXJzZShvYmouZGF0YSkpO1xyXG4gICAgICAgICAgICAkc2NvcGUucmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgbXNnOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDogXCJcIlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IG9iai51cmwsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IG9iai5tZXRob2QsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBzZXJpYWxpemVEYXRhKGFhKVxyXG4gICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5yZXN1bHQgPSBcIlJlcSBTdWNjZXNzXCI7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0ID0gcmVzO1xyXG4gICAgICAgICAgICB9LCByZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bHQgPSByZXM7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0LnJlc3VsdCA9IFwiUmVxIEZhaWxcIjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQGF1dGhvciBTaGF3blxyXG4gKiBAZGVzYyBDb250cm9sbGVycyBvZiB0aGUgbWFpbkFQUFxyXG4gKi9cclxuKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29tcG9uZW50cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ3VzZXJDdHJsJywgdXNlckN0cmwpO1xyXG5cclxuICAgIHVzZXJDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckcm9vdFNjb3BlJywgJyRsb2NhdGlvbicsICdBVVRIX0VWRU5UUycsICdBdXRoU2VydmljZSddO1xyXG4gICAgZnVuY3Rpb24gdXNlckN0cmwoJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24sIEFVVEhfRVZFTlRTLCBBdXRoU2VydmljZSkge1xyXG4gICAgICAgICRzY29wZS4kb24oQVVUSF9FVkVOVFMubG9nb3V0U3VjY2VzcywgKGV2ZW50LCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgbmVlZCBsb2dpblwiKTtcclxuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpOyIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvbXBvbmVudHMnKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ2Zvb3RlcicsIGZvb3Rlcik7XHJcblxyXG4gICAgZnVuY3Rpb24gZm9vdGVyKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBpY29uOiBcIkBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2pzL2xheW91dC9mb290ZXIvZm9vdGVyLmh0bWwnLFxyXG4gICAgICAgICAgICByZXN0cmljdDogXCJBRVwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAubGF5b3V0JylcclxuICAgICAgICAvLyBkYXNoYm9hcmQgU2lkZWJhclxyXG4gICAgICAgIC5jb250cm9sbGVyKFwiU2lkZWJhckN0cmxcIiwgU2lkZWJhckN0cmwpO1xyXG5cclxuICAgIFNpZGViYXJDdHJsLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCIkY29va2llc1wiXTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gU2lkZWJhckN0cmwoJHNjb3BlLCAkY29va2llcykge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNpZGViYXIgVG9nZ2xlICYgQ29va2llcyBDb250cm9sXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLy8gY29uc3QgbW9iaWxlVmlldyA9IDk5MjtcclxuICAgICAgICAvLyAkc2NvcGUuZ2V0V2lkdGggPSAoKSA9PiB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICAvLyAkc2NvcGUuJHdhdGNoKCRzY29wZS5nZXRXaWR0aCwgKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgPT4ge1xyXG4gICAgICAgIC8vICAgICBpZiAobmV3VmFsdWUgPj0gbW9iaWxlVmlldykge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKCRjb29raWVzLmdldCgndG9nZ2xlJykpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZSA9ICEkY29va2llcy5nZXQoJ3RvZ2dsZScpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIC8vICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlID0gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICAkc2NvcGUudG9nZ2xlID0gdHJ1ZTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgICRzY29wZS50b2dnbGVTaWRlYmFyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlID0gISRzY29wZS50b2dnbGU7XHJcbiAgICAgICAgICAgIC8vICRjb29raWVzLnB1dCgndG9nZ2xlJywgJHNjb3BlLnRvZ2dsZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyB3aW5kb3cub25yZXNpemUgPSAoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAvLyB9O1xyXG4gICAgfVxyXG59KSgpOyIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLndpZGdldHMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdBbGVydHNDdHJsJywgQWxlcnRzQ3RybCk7XHJcblxyXG4gICAgQWxlcnRzQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuICAgIGZ1bmN0aW9uIEFsZXJ0c0N0cmwoJHNjb3BlKSB7XHJcbiAgICAgICAgJHNjb3BlLmFsZXJ0cyA9IFt7XHJcbiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcclxuICAgICAgICAgICAgbXNnOiAnVGhhbmtzIGZvciB2aXNpdGluZyEgRmVlbCBmcmVlIHRvIGNyZWF0ZSBwdWxsIHJlcXVlc3RzIHRvIGltcHJvdmUgdGhlIGRhc2hib2FyZCEnXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsXHJcbiAgICAgICAgICAgICAgICBtc2c6ICdGb3VuZCBhIGJ1Zz8gQ3JlYXRlIGFuIGlzc3VlIHdpdGggYXMgbWFueSBkZXRhaWxzIGFzIHlvdSBjYW4uJ1xyXG4gICAgICAgICAgICB9XTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZEFsZXJ0ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAkc2NvcGUuYWxlcnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgbXNnOiAnQW5vdGhlciBhbGVydCEnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jbG9zZUFsZXJ0ID0gaW5kZXggPT4ge1xyXG4gICAgICAgICAgICAkc2NvcGUuYWxlcnRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSkoKTsiLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC53aWRnZXRzJylcclxuICAgICAgICAuZGlyZWN0aXZlKFwicmRMb2FkaW5nXCIsIHJkTG9hZGluZyk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmRMb2FkaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IGQgPSB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiBcIkFFXCIsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImxvYWRpbmdcIj48ZGl2IGNsYXNzPVwiZG91YmxlLWJvdW5jZTFcIj48L2Rpdj48ZGl2IGNsYXNzPVwiZG91YmxlLWJvdW5jZTJcIj48L2Rpdj48L2Rpdj4nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gZFxyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC53aWRnZXRzJylcclxuICAgICAgICAvLyBhbmd1bGFyLXVpIE1vZGFsXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ01vZGFsRGVtb0N0cmwnLCBNb2RhbERlbW9DdHJsKTtcclxuXHJcbiAgICBNb2RhbERlbW9DdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckdWliTW9kYWwnLCAnJGxvZyddO1xyXG4gICAgZnVuY3Rpb24gTW9kYWxEZW1vQ3RybCgkc2NvcGUsICR1aWJNb2RhbCwgJGxvZykge1xyXG4gICAgICAgICRzY29wZS5pdGVtcyA9IFsnaXRlbTEnLCAnaXRlbTInLCAnaXRlbTMnXTtcclxuICAgICAgICAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICRzY29wZS5vcGVuID0gc2l6ZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb246ICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbXlNb2RhbENvbnRlbnQuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxyXG4gICAgICAgICAgICAgICAgc2l6ZSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcygpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5pdGVtcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihzZWxlY3RlZEl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkID0gc2VsZWN0ZWRJdGVtO1xyXG4gICAgICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkbG9nLmluZm8oYE1vZGFsIGRpc21pc3NlZCBhdDogJHtuZXcgRGF0ZSgpfWApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS50b2dnbGVBbmltYXRpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9ICEkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLndpZGdldHMnKVxyXG5cclxuICAgICAgICAvLyBQbGVhc2Ugbm90ZSB0aGF0ICR1aWJNb2RhbEluc3RhbmNlIHJlcHJlc2VudHMgYSBtb2RhbCB3aW5kb3cgKGluc3RhbmNlKSBkZXBlbmRlbmN5LlxyXG4gICAgICAgIC8vIEl0IGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgJHVpYk1vZGFsIHNlcnZpY2UgdXNlZCBhYm92ZS5cclxuICAgICAgICAvLyBhbmd1bGFyLXVpIE1vZGFsXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ01vZGFsSW5zdGFuY2VDdHJsJywgTW9kYWxJbnN0YW5jZUN0cmwpO1xyXG5cclxuICAgIE1vZGFsSW5zdGFuY2VDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckdWliTW9kYWxJbnN0YW5jZScsICdpdGVtcyddO1xyXG4gICAgZnVuY3Rpb24gTW9kYWxJbnN0YW5jZUN0cmwoJHNjb3BlLCAkdWliTW9kYWxJbnN0YW5jZSwgaXRlbXMpIHtcclxuICAgICAgICAkc2NvcGUuaXRlbXMgPSBpdGVtcztcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWQgPSB7XHJcbiAgICAgICAgICAgIGl0ZW06ICRzY29wZS5pdGVtc1swXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5vayA9ICgpID0+IHtcclxuICAgICAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoJHNjb3BlLnNlbGVjdGVkLml0ZW0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICR1aWJNb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pKCk7IiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAud2lkZ2V0cycpXHJcblxyXG4gICAgICAgIC8vIGFuZ3VsYXItdWkgcHJvZ3Jlc3NCYXJcclxuICAgICAgICAuY29udHJvbGxlcignUHJvZ3Jlc3NEZW1vQ3RybCcsIFByb2dyZXNzRGVtb0N0cmwpO1xyXG4gICAgUHJvZ3Jlc3NEZW1vQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBQcm9ncmVzc0RlbW9DdHJsKCRzY29wZSkge1xyXG4gICAgICAgICRzY29wZS5tYXggPSAyMDA7XHJcblxyXG4gICAgICAgICRzY29wZS5yYW5kb20gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwICsgMSk7XHJcbiAgICAgICAgICAgIGxldCB0eXBlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMjUpIHtcclxuICAgICAgICAgICAgICAgIHR5cGUgPSAnd2FybmluZyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPCA1MCkge1xyXG4gICAgICAgICAgICAgICAgdHlwZSA9ICdpbmZvJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA8IDc1KSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gJ3N1Y2Nlc3MnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHlwZSA9ICdzdWNjZXNzJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnNob3dXYXJuaW5nID0gdHlwZSA9PT0gJ2RhbmdlcicgfHwgdHlwZSA9PT0gJ3dhcm5pbmcnO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmR5bmFtaWMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5yYW5kb20oKTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUucmFuZG9tU3RhY2tlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc3RhY2tlZCA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgdHlwZXMgPSBbJ3N1Y2Nlc3MnLCAnaW5mbycsICd3YXJuaW5nJywgJ2RhbmdlciddO1xyXG5cclxuICAgICAgICAgICAgLy8gZm9yICh2YXIgaSA9IDAsIG4gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0ICsgMSk7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gICAgIHZhciBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpO1xyXG4gICAgICAgICAgICAvLyAgICAgJHNjb3BlLnN0YWNrZWQucHVzaCh7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdmFsdWU6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwICsgMSksXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdHlwZTogdHlwZXNbaW5kZXhdXHJcbiAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5yYW5kb21TdGFja2VkKCk7XHJcbiAgICB9XHJcbn0pKCk7IiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAud2lkZ2V0cycpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgncmRXaWRnZXQnLCByZFdpZGdldCk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmRXaWRnZXQoKSB7XHJcbiAgICAgICAgY29uc3QgZGlyZWN0aXZlID0ge1xyXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJ3aWRnZXRcIiBuZy10cmFuc2NsdWRlPjwvZGl2PicsXHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAvKiAqL1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcC53aWRnZXRzJylcclxuICAgIC5kaXJlY3RpdmUoXCJyZFdpZGdldEJvZHlcIiwgcmRXaWRnZXRCb2R5KTtcclxuXHJcbiAgICBmdW5jdGlvbiByZFdpZGdldEJvZHkoKSB7XHJcbiAgICAgICAgY29uc3QgZCA9IHtcclxuICAgICAgICAgICAgcmVxdWlyZXM6IFwiXnJkV2lkZ2V0XCIsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nOiBcIkA/XCIsXHJcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiBcIkA/XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdHJhbnNjbHVkZTogITAsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cIndpZGdldC1ib2R5XCIgbmctY2xhc3M9XCJjbGFzc2VzXCI+PHJkLWxvYWRpbmcgbmctc2hvdz1cImxvYWRpbmdcIj48L3JkLWxvYWRpbmc+PGRpdiBuZy1oaWRlPVwibG9hZGluZ1wiIGNsYXNzPVwid2lkZ2V0LWNvbnRlbnRcIiBuZy10cmFuc2NsdWRlPjwvZGl2PjwvZGl2PicsXHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiBcIkVcIlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGRcclxuICAgIH1cclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICAgIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcC53aWRnZXRzJylcclxuICAgIC5kaXJlY3RpdmUoXCJyZFdpZGdldEZvb3RlclwiLCByZFdpZGdldEZvb3Rlcik7XHJcblxyXG4gICAgZnVuY3Rpb24gcmRXaWRnZXRGb290ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZSA9IHtcclxuICAgICAgICAgICAgcmVxdWlyZXM6IFwiXnJkV2lkZ2V0XCIsXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6ICEwLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJ3aWRnZXQtZm9vdGVyXCIgbmctdHJhbnNjbHVkZT48L2Rpdj4nLFxyXG4gICAgICAgICAgICByZXN0cmljdDogXCJFXCJcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBlXHJcbiAgICB9XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLndpZGdldHMnKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoXCJyZFdpZGdldEhlYWRlclwiLCByZFdpZGdldFRpdGxlKTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gcmRXaWRnZXRUaXRsZSgpIHtcclxuICAgICAgICBjb25zdCBlID0ge1xyXG4gICAgICAgICAgICByZXF1aXJlczogXCJecmRXaWRnZXRcIixcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIkBcIixcclxuICAgICAgICAgICAgICAgIGljb246IFwiQFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6ICEwLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJ3aWRnZXQtaGVhZGVyXCI+PGkgY2xhc3M9XCJmYVwiIG5nLWNsYXNzPVwiaWNvblwiPjwvaT4ge3t0aXRsZX19IDxkaXYgY2xhc3M9XCJwdWxsLXJpZ2h0XCIgbmctdHJhbnNjbHVkZT48L2Rpdj48L2Rpdj4nLFxyXG4gICAgICAgICAgICByZXN0cmljdDogXCJFXCJcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBlXHJcbiAgICB9XHJcbn0pKCk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
